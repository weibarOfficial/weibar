!function(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,a){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="//www.yylive.com/static/pc/",t(t.s=12)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={giftData:null,dtd:new $.Deferred,init:function(e){return this.ajaxData(e.merchantId),this.dtd},ajaxData:function(e){var t=this;return $.getJSON("/pc/goodsSettingInfo",{merchantId:e}).then(function(e){e&&0===e.code&&e.data?(t.giftData=e.data,t.dtd.resolve(e.data)):alert("礼物列表获取失败")})},getById:function(e){for(var t=0;t<this.giftData.length;t++)if(this.giftData[t].goodsId==e)return this.giftData[t]},getData:function(){return this.dtd}};t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={faceUrl:"//www.yylive.com/static/images/faces/",newFace:{ic_emoji_666:"[666]",ic_emoji_bishi:"[鄙视你]",ic_emoji_bukaixin:"[不开心]",ic_emoji_dai:"[呆]",ic_emoji_haixiu:"[害羞]",ic_emoji_huaji:"[滑稽]",ic_emoji_keai:"[可爱]",ic_emoji_kelian:"[可怜]",ic_emoji_ku:"[哭]",ic_emoji_liulei:"[流泪]",ic_emoji_memeda:"[么么哒]",ic_emoji_mengbi:"[懵逼]",ic_emoji_nu:"[怒]",ic_emoji_se:"[色]",ic_emoji_shuai:"[衰]",ic_emoji_tanqi:"[叹气]",ic_emoji_tiaopi:"[调皮]",ic_emoji_wabizi:"[挖鼻子]",ic_emoji_weiqu:"[很委屈]",ic_emoji_weixiao:"[微笑]",ic_emoji_wulian:"[捂脸]",ic_emoji_wuzui:"[捂嘴]",ic_emoji_xiao:"[笑]",ic_emoji_xiaoku:"[笑哭]",ic_emoji_yun:"[晕]",ic_emoji_zaijian:"[再见了]",ic_emoji_zhuakuang:"[抓狂]"},init:function(e){for(var t=this.arr,i=0;i<e.length;i++){for(var a=e[i].innerHTML,n=0;n<t.length;n++)for(;-1!=a.indexOf(t[n]);)a=a.replace(t[n],'<img style="width:30px;height:30px;" src="'+this.faceUrl+(n+1)+'.png" />');e[i].innerHTML=a}},replaceText:function(e){if(e){var t=this.newFace;for(var i in t)for(;-1!=e.indexOf(t[i]);)e=e.replace(t[i],'<img style="width:30px;height:30px; margin:0 3px; display:inline-block; position:relative; top:4px" src="'+this.faceUrl+i+'.png" />');return e}return""}};t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){if(0!=e.box.length){this.id=App.public.getId();var t='<span class="wemewLine" id="'+this.id+'">';t+='<span class="wemewLine-line"><span class="wemewLine-hideLine"><tt class="wemewLine-pie"></tt><tt class="wemewLine-color"></tt></span></span>',t+="",t+='<i class="wemewLine-info"></i>',t+="</span>",$(t).appendTo(e.box),this.range=e.range,this.change=e.change||function(){},this.unit=e.unit||"",this.len=e.range[1]-e.range[0],this.isInt=null!=e.isInt&&e.isInt,this.init(),null!=e.useRange&&this.setByRange(e.useRange)}};a.prototype={init:function(){var e=$("#"+this.id),t=!1,i=e.find(".wemewLine-pie")[0].offsetWidth,a=i/2-1,n=this;e.bind("mousedown",function(e){t=!0,$(document).bind("mouseup.wemewLine",function(e){t=!1,$(document).unbind("mouseup.wemewLine")});var s=e.clientX-$(this).offset().left-a;return s=s<0?0:s,s=s>this.offsetWidth-i?this.offsetWidth-i:s,$(this).find(".wemewLine-pie").css({left:s}),n.setByLen(s),!1}).bind("mousemove",function(e){if(t){var s=e.clientX-$(this).offset().left-a;s=s<0?0:s,s=s>this.offsetWidth-i?this.offsetWidth-i:s,$(this).find(".wemewLine-pie").css({left:s}),n.setByLen(s)}})},getInfo:function(){},setInfo:function(e){this.isInt&&(e=parseInt(e)),$("#"+this.id).find(".wemewLine-info").html(e+this.unit)},setByLen:function(e){var t=$("#"+this.id).find(".wemewLine-hideLine")[0].offsetWidth,i=e/t;$("#"+this.id).find(".wemewLine-color").css({width:100*i+"%"}),e=this.len*i+this.range[0],e=parseFloat(e),this.isInt&&(e=parseInt(e)),e=e<this.range[0]?this.range[0]:e,e=e>this.range[1]?this.range[1]:e,this.change(e),this.setInfo(e.toFixed(1))},setByRange:function(e){if(null!=e&&0!=e.length&&null!=this.range&&0!=this.range.length){e=e<this.range[0]?this.range[0]:e,e=e>this.range[1]?this.range[1]:e,this.isInt&&(e=parseInt(e)),this.change(e);var t=(e-this.range[0])/this.len;t=t<0?0:t,t=100*t+"%",$("#"+this.id).find(".wemewLine-color").css({width:t}),$("#"+this.id).find(".wemewLine-pie").css({left:t}),this.setInfo(e)}},setMax:function(){this.setByRange(this.range[1])},setMin:function(){this.setByRange(this.range[0])}},t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){this.id=App.public.getId();var t='<label for="'+this.id+'" class="wemewSwitchLabel">';t+='<input id="'+this.id+'" class="wemewSwitchInput" type="checkbox">',t+='<div class="wemewSwitchDiv"></div>',t+="</label>",$(t).appendTo(e.box),this.click=e.click||function(){},this.able=!0,this.init(),null!=e.able&&this.setAble(e.able),null!=e.check&&this.setCheck(e.check)};a.prototype={setAble:function(e){this.able=e},setCheck:function(e){e="true"==e||e,e="false"!=e&&e,$("#"+this.id)[0].checked=e,this.click(e)},init:function(){var e=this;$("#"+this.id).bind("change",function(){if(!e.able)return!1;e.click(this.checked)})}},t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){this.id=App.public.getId();for(var t='<div class="wemewCheckBox" id="'+this.id+'">',i=0;i<e.options.length;i++)t+='<span class="wemewCheck">',t+='<tt class="wemewCheck-right">&radic;</tt>',t+='<span class="wemewCheckInfo">'+e.options[i]+"</span>",t+="</span>";t+="</div>",$(t).appendTo(e.box),this.multiple=null!=e.multiple&&e.multiple,this.notNull=null!=e.notNull&&e.notNull,this.check="number"==typeof e.check?[e.check]:null==e.check?[]:e.check,this.able=!0,this.change=e.change||function(){},this.init(),this.setCheck()};a.prototype={setAble:function(e){this.able=e},getCheck:function(){return $("#"+this.id).find(".check").index()},getValue:function(){return $("#"+this.id).find(".check .wemewCheckInfo").text()},getCheckArray:function(){for(var e=[],t=$("#"+this.id).find(".check"),i=0;i<t.length;i++)e.push($(t[i]).index());return e},getAll:function(){for(var e=[],t=$("#"+this.id).find(".wemewCheck"),i=0;i<t.length;i++)e.push($(t[i]).hasClass("check"));return e},fire:function(e){$("#"+this.id).find(".wemewCheck")[e].click()},setCheck:function(){if(this.check.length>0)for(var e=0;e<this.check.length;e++)$("#"+this.id).find(".wemewCheck")[this.check[e]].click()},init:function(){var e=this;$("#"+this.id).find(".wemewCheck").bind("click",function(){if(e.able)if(e.multiple)if($(this).hasClass("check")){if(1==$("#"+e.id).find(".check").length&&e.notNull)return;$(this).removeClass("check"),e.change()}else $(this).addClass("check"),e.change();else if($(this).hasClass("check")){if(e.notNull)return;$(this).removeClass("check"),e.change()}else $("#"+e.id).find(".check").removeClass("check"),$(this).addClass("check"),e.change()})}},t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={loadImage:function(e,t){var i=new Image;i.onload=i.onerror=function(){t&&t(),this.onload=this.onerror=null},i.src=e},autoTime:18e4,timeout:null,running:!1,color:["#00101c","#150023","190007"],swiper:null,duration:null,ajaxDelay:1e4,title:["今夜红人榜","互动土豪榜"],hotStart:!1,richStart:!1,hotTimeout:null,richTimeout:null,closeHot:function(){this.hotStart=!1;var e=this;try{clearTimeout(e.hotTimeout)}catch(e){}},closeRich:function(){this.richStart=!1;var e=this;try{clearTimeout(e.richTimeout)}catch(e){}},_start:function(e){var t=this;if(0==e){if($(".onWallHot_icon").hasClass("disabled"))return;try{clearTimeout(t.hotTimeout)}catch(e){}this.hotTimeout=setTimeout(function(){a.add($(".onWallHot_icon")[0],0,!0)},a.autoTime)}else if(1==e){if($(".onWallRich_icon").hasClass("disabled"))return;try{clearTimeout(t.richTimeout)}catch(e){}this.richTimeout=setTimeout(function(){a.add($(".onWallRich_icon")[0],1,!0)},a.autoTime)}},startHot:function(){this.hotStart||(this.hotStart=!0,this._start(0))},startRich:function(){this.richStart||(this.richStart=!0,this._start(1))},init:function(e){return},getData:function(e,t){1==e?function(){arguments.callee;ajax_getRichUser(function(e){null!=e&&0!=e.length||(e=[]),t(e)},function(){t([])})}():0==e&&function(){arguments.callee;ajax_getHotUser(function(e){null!=e&&0!=e.length||(e=[]);for(var i=0;i<e.length;i++)null!=e[i].img&&""!=e[i].img||(e[i].img=e[i].head);e.length>0?a.loadImage(e[0].img,function(){t(e)}):t(e)},function(){t([])})}()},showRich:function(e,t){var i='<div class="module-slide-page">';e.length>0&&(i+='<tt id="module-slide-page">1</tt>'),i+=" / "+Math.ceil(e.length/3)+"</div>",i+="",i+='<div id="'+t+'moduleSwiper" class="moduleSwiper"><div class="swiper-wrapper">';for(var a=1,n=0;n<e.length;n++){var s=e[n];n%3==0&&(i+='<div class="swiper-slide"><div class="module-slide module-rich"  data-index="'+a+'"><span class="tableSpan">'),i+='<div class="module-rich-one">';s.sex;i+='<span class="module-rich-span1"><i class="module-rich-user"><img class="module-rich-userImg" src="'+s.head+'" />',i+=n<=2?'<i class="module_richTop'+(n+1)+'"></i>':'<i class="module_richNoTop"></i>',i+="</i></span>",i+='<span class="module-rich-span2 ellipsis">'+s.userName+"</span>",i+='<span class="module-rich-span3"><tt>霸屏</tt><b>'+s.bpNum+"次</b></span>",i+='<span class="module-rich-span4"><tt>打赏</tt><b>'+s.dsNum+"次</b></span>",i+='<div class="clear"></div>',i+="</div>",((n+1)%3==0||(n+1)%3!=0&&n==e.length-1)&&(i+="</span></div></div>",a++)}return i+="</div>",i+="</div>"},showHot:function(e,t){var i='<div class="module-slide-page">';e.length>0&&(i+='<tt id="module-slide-page">1</tt>'),i+=" / "+e.length+"</div>",i+='<div id="'+t+'moduleSwiper" class="moduleSwiper"><div class="swiper-wrapper">';for(var a=0;a<e.length;a++){var n=e[a];i+='<div class="swiper-slide">',i+='<div class="module-hot module-slide" data-index="'+(a+1)+'">',i+='<span class="module-hot-userBox">',i+="<tt></tt>",i+='<span class="module-hot-user">',i+='<img class="'+n.sex+'" src="'+n.head+'" />',i+='<p class="module-hot-userName ellipsis">'+n.userName+"</p>",i+='<p class="module-hot-bp1 ellipsis">收到霸屏 '+n.getBpNum+"次</p>",i+='<p class="module-hot-bp2 ellipsis">收到历史霸屏 '+n.getAllBpNum+"次</p>",i+="</span></span>",i+="",i+='<img data-src="'+n.head+'" class="module-hot-bigImg" src="'+n.img+'" onerror="moduleControl.errorImg(this)" />',i+="",i+="</div></div>"}return i+="</div></div>"},errorImg:function(e){$(e).attr({src:$(e).attr("data-src")})},initSwiper:function(e,t){if(!($("#"+e+"moduleSwiper").find(".swiper-slide").length<1)){var i=$("#"+e);this.isClose=!1;var n=this;this.Swiper=new Swiper("#"+e+"moduleSwiper",{effect:"cube",speed:700,auto:"auto",autoplay:8e3,autoplayDisableOnInteraction:!1,autoplayStopOnLast:!0,cube:{shadow:!1},onInit:function(e){var n=$(i.find(".swiper-slide")[e.activeIndex]),s=$(n).find(".module-slide").attr("data-index");if($(n).find(".module-hot").addClass("animate"),$(n).find(".module-rich-one").length>0)for(var o=$(n).find(".module-rich-one"),l=0;l<o.length;l++)$(o[l]).addClass("animate"+(l+1));else try{var r=parseInt(s);t.length>r&&a.loadImage(t[r].img)}catch(e){}i.find("#module-slide-page").text(s)},onSlideChangeEnd:function(e){if(!n.isClose){var s=$(i.find(".swiper-slide")[e.activeIndex]),o=$(s).find(".module-slide").attr("data-index");if($(s).find(".module-hot").addClass("animate"),$(s).find(".module-rich-one").length>0)for(var l=$(s).find(".module-rich-one"),r=0;r<l.length;r++)$(l[r]).addClass("animate"+(r+1));else try{var c=parseInt(o);t.length>c&&a.loadImage(t[c].img)}catch(e){}i.find("#module-slide-page").text(o)}}})}},initCircle:function(e,t){Circles.create({id:t+"module-circle",radius:18,value:100,maxValue:100,width:2,text:function(e){return""},colors:["#666","#fff"],duration:e})},add:function(e,t,i){if(i=null!=i&&i,$(e).hasClass("disabled")){if(i)return;return App.public.showInfo("请在后台开通模块组件")}if($(e).hasClass("run")){if(i)return;return App.public.showInfo("当前有组件正在显示")}if(this.running)return i?$(e).addClass("wait"):App.public.showInfo("当前有组件正在显示");this._add(t,e,i)},_add:function(e,t,i){this.running=!0;var a=this;$(t).addClass("animate"),this.getData(e,function(n){$(t).removeClass("animate");var s=App.public.getId(),o="",l=8e3;if(!(n.length>0)){var r=0==e?"没有红人榜数据":"没有土豪榜数据";return i||App.public.showInfo(r),a.running=!1,$(t).removeClass("run"),void a.close(t)}0==e?(l*=n.length,l+=700*(n.length-1),o=a.showHot(n,s)):(l*=Math.ceil(n.length/3),l+=700*(Math.ceil(n.length/3)-1),o=a.showRich(n,s)),l-=150;var c='<div id="'+s+'" class="module-box"><div class="module-title">'+a.title[e]+'<span id="'+s+'module-circle" class="module-circle"></span></div><div class="module-main">'+o+"</div></div>";$("#moduleBox").html(c);var d=a.color[App.public.getRandom(0,a.color.length-1)];$("#"+s).find(".module-title").css({background:d}),$("#msgBoxAll").removeClass("show").addClass("hide"),$("#moduleBox").removeClass("hide").addClass("show"),setTimeout(function(){a.initSwiper(s,n),a.initCircle(l,s),a.count(t,l,i)},500)})},count:function(e,t){var i=this;setTimeout(function(){i.close(e)},t)},check:function(){var e=$("._onWallModule.wait");if(e.length>0){var t=e[0],i=$(t).attr("data-module");this._add(i,t,!0)}},resetSwiper:function(){if(null!=this.Swiper){var e=this;try{e.Swiper.update()}catch(e){}}},close:function(e,t){var i=this;this.isClose=!0;try{i.Swiper.stopAutoplay(),i.Swiper.destory(),i.Swiper=null}catch(e){}$(e).removeClass("run wait"),$(e).hasClass("disabled")||($(e).hasClass("onWallHot_icon")?this._start(0):$(e).hasClass("onWallRich_icon")&&this._start(1)),$("#msgBoxAll").removeClass("hide").addClass("show"),$("#moduleBox").removeClass("show").addClass("hide"),setTimeout(function(){i.running=!1,i.check()},1e3)}};t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){this.path=[],this.speed=i(10,20),this.count=a(10,30),this.x=m/2,this.y=u/2+1,this.target={x:m/2,y:u/2},this.dist=0,this.angle=0,this.hue=f/5,this.life=1,this.updateAngle(),this.updateDist()}function i(e,t){return Math.random()*(t-e)+e}function a(e,t){return Math.floor(e+Math.random()*(t-e+1))}function n(){m=2*Math.ceil(e.width/2),u=2*Math.ceil(e.height/2),f=0,g.length=0,e.width=m,e.height=u}function o(){f%10==0&&g.push(new t)}function l(){for(var e=g.length;e--;)g[e].step(e)}function r(){h.globalCompositeOperation="destination-out",h.fillStyle="hsla(0, 0%, 0%, 0.1",h.fillRect(0,0,m,u),h.globalCompositeOperation="lighter"}function c(){h.save(),h.translate(m/2,u/2),h.rotate(.001*f);Math.cos(.02*f);h.translate(-m/2,-u/2);for(var e=g.length;e--;)g[e].draw(e);h.restore()}function d(){s.richCanvasOpen&&(window.requestAnimationFrame(d),o(),l(),r(),c(),f++)}var h,m,u,p,g,f;t.prototype.step=function(e){this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed,this.updateDist(),this.dist<this.speed&&(this.x=this.target.x,this.y=this.target.y,this.changeTarget()),this.path.push({x:this.x,y:this.y}),this.path.length>this.count&&this.path.shift(),this.life-=.001,this.life<=0&&(this.path=null,g.splice(e,1))},t.prototype.updateDist=function(){var e=this.target.x-this.x,t=this.target.y-this.y;this.dist=Math.sqrt(e*e+t*t)},t.prototype.updateAngle=function(){var e=this.target.x-this.x,t=this.target.y-this.y;this.angle=Math.atan2(t,e)},t.prototype.changeTarget=function(){switch(a(0,3)){case 0:this.target.y=this.y-p;break;case 1:this.target.x=this.x+p;break;case 2:this.target.y=this.y+p;break;case 3:this.target.x=this.x-p}this.updateAngle()},t.prototype.draw=function(e){h.beginPath();for(var t=i(0,10),a=0,n=this.path.length;a<n;a++)h[0===a?"moveTo":"lineTo"](this.path[a].x+i(-t,t),this.path[a].y+i(-t,t));h.strokeStyle="hsla("+i(this.hue-50,this.hue+50)+", 50%, 35%, "+this.life/3+")",h.lineWidth=i(.1,2),h.stroke()},function(){s.richCanvasOpen=!0,h=e.getContext("2d"),p=30,g=[],n(),d()}()},n=function(e){function t(e,t){return Math.random()*(t-e)+e}function i(){}function a(){if(s.richCanvasOpen){if(!document.hidden){o.fillStyle=c,o.fillRect(0,0,l,r);for(var e in h)h[e].draw()}requestAnimationFrame(a)}}var n=e,o=n.getContext("2d"),l=n.width,r=n.height,c="rgba(0, 0, 0, .1)",d=30,h=[];i.prototype={init:function(){this.x=t(0,l),this.y=1,this.color="hsl(180, 100%, 50%)",this.w=2,this.h=1,this.vy=t(9,10),this.vw=6,this.vh=1,this.size=2,this.hit=t(.8*r,.9*r),this.a=1,this.va=.96},draw:function(){this.y>this.hit?(o.beginPath(),o.moveTo(this.x,this.y-this.h/2),o.bezierCurveTo(this.x+this.w/2,this.y-this.h/2,this.x+this.w/2,this.y+this.h/2,this.x,this.y+this.h/2),o.bezierCurveTo(this.x-this.w/2,this.y+this.h/2,this.x-this.w/2,this.y-this.h/2,this.x,this.y-this.h/2),o.strokeStyle="hsla(180, 100%, 50%, "+this.a+")",o.stroke(),o.closePath()):(o.fillStyle=this.color,o.fillRect(this.x,this.y,this.size,5*this.size)),this.update()},update:function(){this.y<this.hit?this.y+=this.vy:this.a>.03?(this.w+=this.vw,this.h+=this.vh,this.w>100&&(this.a*=this.va,this.vw*=.98,this.vh*=.98)):this.init()}},function(){s.richCanvasOpen=!0;for(var e=0;e<d;e++)!function(e){setTimeout(function(){var e=new i;e.init(),h.push(e)},200*e)}(e)}(),a()},s={animate:[a,n],richCanvasOpen:!0,close:function(){this.richCanvasOpen=!1}};window.canvasRichBg=s,t.default=s},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),s=a(n),o=i(0),l=a(o),r={config:{},running:!1,able:!0,newMsgNum:null,addArray:[],delArray:[],replaceArray:[],index:0,oldIndex:0,MSG_TYPE:{TEXT:0,PHOTO:1,GIVE:2,RED_BAG:3,VOTE:5,SONG:4,WORDS_AND_PHOTO:6,RED_BAG_GOT:7},STATUS:{NOT_SHOW:3,BA:2,NOT_BA:1},createItem:function(e){if(this.filterData(e),this.addLoopImage(e),e.type===this.MSG_TYPE.GIVE)return e.giveInfo&&e.giveInfo.goodsId?this.dsMsg(e):"";if(e.type===this.MSG_TYPE.VOTE);else{if(e.type===this.MSG_TYPE.RED_BAG)return this.redBagMsg(e);if(e.type!==this.MSG_TYPE.SONG)return e.type===this.MSG_TYPE.RED_BAG_GOT?"":e.status===this.STATUS.BA?this.bpMsg(e):this.normalMsg(e)}},createHtml:function(e){function t(e){return!(!i.willShow(e)||i.isDulplicate(e))}var i=this,a="";return e=$.isArray(e)?e:[e],e.forEach(function(e){t(e)&&(a+=i.createItem(e))}),a},willShow:function(e){var t=null;return e.status!==this.STATUS.NOT_SHOW||(t=this.$cnt.find('.j_onWallMsg[mid="'+e.messageId+'"]'),t.length&&t.remove(),!1)},isDulplicate:function(e){return!!this.$cnt.find('.j_onWallMsg[mid="'+e.messageId+'"]').length},bpMsg:function(e){var t="longMsg ",i="",t="txt-Icon ",a="";switch(e.theme){case 0:t+="themeMsg0",a="示爱霸屏",i="themeIcon_love";break;case 1:t+="themeMsg1",a="求约霸屏",i="themeIcon_tryst";break;case 2:t+="themeMsg2",a="求婚霸屏",i="themeIcon_propose";break;case 3:t+="themeMsg3",a="女神霸屏",i="themeIcon_beautiful";break;case 4:t+="themeMsg4",a="生日霸屏",i="themeIcon_cake";break;default:t+="themeMsgBp",a="重金霸屏",i="themeIcon_default"}return e._typeCls=t,e._typeIconCls=i,e._extroHtml=a+e.second+"秒  "+(e.times>1?e.times+"次":""),e._highLightCls="richText",this.normalMsg(e)},redBagMsg:function(e){return e._highLightCls="redBagText",e._extroHtml='<i class="newDsIcon_redbag"></i>发出'+e.redPackageAmount+"元红包",e._contentHtml=e.redPackageTitle,this.normalMsg(e)},dsMsg:function(e){var t=l.default.getById(e.giveInfo.goodsId);return e._highLightCls="dsText",e._extroHtml='<img src="'+t.goodsImgUrl+'" style="height:46px;"/>打赏给 '+e.giveInfo.givenUserName+" "+t.goodsName,e._contentHtml=e.giveInfo.content||t.goodsMsg,this.normalMsg(e)},normalMsg:function(e){return e._extroHtml&&e._contentHtml&&(e._extroHtml+=":"),e._index=this.getIndex(),template("msgTpl",e)},appendData:function(e){this.$cnt.append(this.createHtml(e))},getOld:function(){var e=null;for(this.oldIndex+=1;this.oldIndex<=this.index&&(e=this.$cnt.find(".j_onWallMsg[index="+this.oldIndex+"]"),!e.length);)this.oldIndex+=1;return e},getIndex:function(){return this.index+=1,this.index},replaceMsg:function(e){var t=this.getOld(),i=this.createItem(e);$(t).replaceWith(i)},replaceData:function(e){e=$.isArray(e)?e:[e],e.forEach(function(e){this.replaceMsg(e)}.bind(this))},add:function(e){if(this.running)this.addArray=this.addArray.concat(e);else{if(this.$cnt.find(".j_onWallMsg").length>=SystemControl.data.msgNum)return void this.replaceData(e);this.appendData(e)}},init:function(e){this.start(),this.$cnt=$("#msgBox")},start:function(){var e=this,t=SystemControl.data._msgDelay-1e3;t=t<1e3?1e3:t,setTimeout(function(){try{clearTimeout(e.interval)}catch(e){}e.interval=setTimeout(function t(){$("#msgBox").find(".j_onWallMsg").length>=4&&e.able?e.scroll():e.interval=setTimeout(t,1e3)},1e3)},t)},setAble:function(e){this.able=e},remove:function(e){if(this.running)return this.delArray.push(e);$("#"+e).remove()},scroll:function(){this.running=!0;var e=this.$cnt.find(".j_onWallMsg")[0];if(!$(e).hasClass("module-box")){var t=e.cloneNode(!0);this.$cnt[0].appendChild(t)}var i=this;App.public.isHidden()?(this.$cnt.css({transition:"none"}),this.$cnt.css({transform:"translate3d(0,0,0)"}),this.$cnt.animate({top:this.$cnt[0].offsetTop-e.offsetHeight-10},"normal",function(){i.afterScroll()})):(setTimeout(function(){i.afterScroll()},550),this.$cnt.css({transition:"transform 0.5s"}),this.$cnt.css({transform:"translate3d(0,"+(this.$cnt[0].offsetTop-e.offsetHeight-10)+"px,0)"}))},afterScroll:function(){this.$cnt.find(".j_onWallMsg")[0]&&$(this.$cnt.find(".j_onWallMsg")[0]).remove(),this.$cnt.css({top:0}),this.$cnt.css({transition:"none"}),this.$cnt.css({transform:"translate3d(0,0,0)"}),this.running=!1;var e=this.addArray,t=this.delArray;if(e.length>0)for(var i=0;i<e.length;i++)this.add(e[i]);if(t.length>0)for(var i=0;i<t.length;i++)this.remove(t[i]);this.addArray=[],this.delArray=[],this.start()},createAll:function(e){},addLoopImage:function(e){e=$.isArray(e)?e:[e],e.forEach(function(e){e._imgArr&&e._imgArr.length&&e._imgArr.forEach(function(e){loopImageControl.add(e)})})},filterData:function(e){e._contentHtml=s.default.replaceText(e.content),e._extroHtml="",e._dateStr=App.Utils.fmDate(e.createTime,"MM-DD hh:mm"),e._sexCls="男"===e.sex?"man":"woman",e._imgArr=e.msgImgUrl&&e.msgImgUrl.split("|")},firstLoad:function(){return this.ajaxLoad({endTime:Date.now()}).then(function(e){if(e&&0===e.code&&e.data)return this.appendData(e.data),this.addLoopImage(e.data),e.data}.bind(this))},ajaxLoad:function(e){return e.count=SystemControl.data.msgNum,e.merchantId=Global.merchantId,$.ajax({url:"/pc/barrageList",data:e,dataType:"json",method:"POST"})}};App.MsgModule=r,t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={running:!1,loaded:0,timeout:null,lastIndex:null,imgList:[],delay:4e3,init:function(){this.create()},create:function(){$('<div id="rightBox" class="show"><div id="beforeImageLoad"><span>图片加载中</span></div><div id="imageBox"></div></div>').appendTo($("#onWallMain")),this.imgList=null==this.imgList||0==this.imgList.length?[]:this.imgList,$(this.createImage()).appendTo($("#imageBox")),basicControl.checkCode()},setList:function(e,t){t=null==t?20:t;for(var i=[],a=0;a<e.length;a++){var n=e[a];if(n.split(",").length>1)for(var s=n.split(","),o=0;o<s.length;o++)i.push(s[o]);else i.push(n)}return i=i.slice(0,20)},createImage:function(){var e=this.imgList;if(0==e.length)return'<div class="defaultImage loopDiv"><img onload="loopImageControl.load(this)" src="'+allImage.loopErrorSrc+'" /></div>';var t="";e=this.setList(e);for(var i=0;i<e.length;i++)t+='<div class="loopDiv" data-index="'+i+'" type="0"><img onload="loopImageControl.load(this)" onerror="loopImageControl.error(this)" src="'+e[i]+'" /></div>';return t},load:function(e){App.public.centerImage(e),++this.loaded>=this.imgList.length&&this.loadOver()},error:function(e){$(e).attr({src:allImage.loopErrorSrc})},getOne:function(){var e=$("#imageBox").find('.loopDiv[type="0"]');return e[App.public.getRandom(0,e.length-1)]},loadOver:function(){$("#imageBox").addClass("show"),$("#beforeImageLoad").remove(),this.loop(),this.resize()},loop:function(){if($("#imageBox").find(".loopDiv").length<=1)return $("#imageBox").find(".loopDiv").addClass("show");if(!this.running){this.running=!0;var e=this,t=0;this.timeout=setTimeout(function i(){$("#imageBox").find(".showBig").removeClass("showBig");var n=e.getOne();1==t&&$(n).addClass("showBig"),$("#imageBox").find(".animateImage").removeClass("animateImage animateBig animateSmall").attr({type:0}),$(n).addClass("animateImage").attr({type:1}),$(n).addClass(0==t?"animateBig":"animateSmall"),t=0==t?1:0,$("#imageBox").find(".loopDiv").length>=2?e.timeout=setTimeout(i,a.delay):e.running=!1},0)}},resetAll:function(){for(var e=$("#imageBox").find(".loopDiv img"),t=0;t<e.length;t++)App.public.centerImage(e[t])},resize:function(){var e=this;$(window).unbind("resize.loopImage").bind("resize.loopImage",function(){e.resetAll()})},add:function(e){if($("#imageBox").find(".loopDiv").length>20)this.replace(e);else{var t=this.getMaxIndex()+1,i='<div class="loopDiv" data-index="'+t+'" type="0"><img onload="loopImageControl.load(this)" onerror="loopImageControl.error(this)" src="'+e+'" /></div>';$(i).appendTo($("#imageBox")),$("#imageBox").find(".loopDiv").length>0&&$("#imageBox").find(".defaultImage").remove()}},replace:function(e){var t=this.getLast();if(null!=t){var i=this.getMaxIndex()+1;$(t).html('<img onload="loopImageControl.load(this)" onerror="loopImageControl.error(this)" src="'+e+'" />').attr({"data-index":i})}},getLast:function(){var e=$("#imageBox").find(".loopDiv");if(0==e.length)return null;for(var t=parseInt($(e[0]).attr("data-index")),i=e[0],a=1;a<e.length;a++)t>parseInt($(e[a]).attr("data-index"))&&(t=parseInt($(e[a]).attr("data-index")),i=e[a]);return i},getMaxIndex:function(){var e=$("#imageBox").find(".loopDiv");if(0==e.length)return 0;for(var t=parseInt($(e[0]).attr("data-index")),i=1;i<e.length;i++)t<parseInt($(e[i]).attr("data-index"))&&(t=parseInt($(e[i]).attr("data-index")));return t},hide:function(){$("#rightBox").hide(),$(window).unbind("resize.loopImage")},show:function(){$("#rightBox").show(),this.resize()},close:function(){this.loaded=0,this.running=!1,this.lastIndex=null,clearTimeout(this.timeout),$(window).unbind("resize.loopImage"),$("#rightBox").remove()},open:function(){this.create()},reset:function(e){null!=e&&(allData.loopImageList=e,this.running=!1,clearTimeout(this.timeout),$(window).unbind("resize.loopImage"),this.loaded=0,$("#imageBox").html(this.createImage()))}};window.loopImageControl=a,t.default=a},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(10),s=a(n),o=i(0),l=a(o),r=App.MsgModule.MSG_TYPE,c=App.MsgModule.STATUS,d={miniBp:{able:!0,use:function(e){this.able=!0;$('<div id="miniBp"><div id="miniBpBox"></div></div>').appendTo($("#all")),"cake"==e.msgType&&(e.msgType="bp",e.theme=5),"loveNight"==e.msgType&&(e.msgType="bp",e.msg="眼缘",e.theme=-1),"bp"==e.msgType?(e.fuckTime=e.richTime,this.bp(e)):"ds"==e.msgType?(e.giftTime=e.fuckTime=allData.newDs[e.giftId].time,this.ds(e)):"richUser"!=e.msgType&&"redBag"!=e.msgType&&"song"!=e.msgType||(e.fuckTime=10,this.active(e))},bp:function(e){var t='<div class="miniRow">';t+='<div class="miniRow_user"><span class="miniRow_headBox '+e.sex+'"></span>',t+='<img class="miniRow_head" src="'+e.head+'" /></div>';var i=e.userName;try{void 0!==e.pascreenSort&&null!=e.pascreenSort&&-1!=e.pascreenSort&&(i+=" 第"+e.pascreenSort+"位霸屏")}catch(e){}t+='<div class="miniRow_userName">'+i+"</div>";var a="miniRow_msg";if(null!=e.src&&e.src.length>0&&(a+=" hasImage"),t+='<div class="'+a+'"><div class="miniRow_text">',null!=e.msg&&e.msg.length>0){var n=d.getTextLength(e.msg),s="";n<=8?s="miniFont8":n<=16?s="miniFont16":n<=24?s="miniFont24":n<=40&&(s="miniFont40"),t+='<div class="table"><span class="tableSpan '+s+'">'+e.msg+"</span></div>"}else t+='<span class="miniBp_noText"></span>';if(t+="</div>",null!=e.src&&e.src.length>0)if(null!=e.videoUrl&&""!=e.videoUrl)t+='<div class="miniRow_bpVideo"><video id="miniBpVideo" src="'+e.videoUrl+'" loop="loop" poster="'+e.src+'"></video></div>';else if(null!=e.allSrc&&""!=e.allSrc){t+="<div>";for(var o=e.allSrc.split(","),l=0;l<o.length;l++)t+='<div class="miniRow_bpImg"><img src="'+o[l]+'" /></div>';t+="</div>"}else t+='<div class="miniRow_bpImg"><img src="'+e.src+'" /></div>';t+="</div>",t+='<div class="miniRow_foot">';var r=d.getBPname(e),c="miniBpIcon_bp";e.theme>=0&&(0==e.theme?c="miniBpIcon_love":1==e.theme?c="miniBpIcon_date":2==e.theme?c="miniBpIcon_marry":3==e.theme?c="miniBpIcon_beauty":4==e.theme?c="miniBpIcon_by":5==e.theme?c="miniBpIcon_birthday":6==e.theme&&(c="miniBpIcon_qixi")),null!=e.bpForName&&(r="为 "+e.bpForName+" "+r),t+='<p><span class="'+c+'"></span>'+r+'倒计时 <b id="bpTime">'+e.richTime+"</b> 秒</p>",t+="</div></div>",$("#miniBpBox").html(t);var h=this;null!=e.videoUrl&&e.videoUrl.length>0?d.loadVideo($("#miniBpVideo"),e,function(){$("#miniBpVideo").length>0&&($("#miniBpVideo")[0].volume=0,$("#miniBpVideo")[0].play()),h.after(e)}):this.after(e)},ds:function(e){var t='<div class="miniRow"><div class="miniRow_ds_cover"></div>';t+='<div class="miniRow_ds"><div class="miniRow_left">',t+='<div class="miniRow_ds_name">'+e.userName+"</div>",t+='<div class="miniRow_user miniDs">',t+='<span class="miniRow_headBox '+e.sex+'"></span>',t+='<img class="miniRow_head" src="'+e.head+'" />',t+="</div>",t+='<div class="miniRow_leftInfo table">',t+='<span class="tableSpan"><p>打赏'+allData.newDs[e.giftId].name+'<span class="miniBp_jt"></span></p>',null!=e.msg&&e.msg.length>0&&(t+="<div>"+e.msg+"</div>"),t+="</span>",t+="</div></div>",t+='<div class="miniRow_right"><div class="miniRow_ds_name">'+e.showName+"</div>",t+='<div class="miniRow_user miniDs"><span class="miniRow_headBox man"></span><img class="miniRow_head" src="'+(e.dsSrc||"")+'" /></div>',t+='<div class="miniSWFBox"><div id="flashContent"></div></div>',t+="</div></div></div>",$("#miniBpBox").html(t);var i=this;wemewSWF._init(e.giftId,function(){if($("#miniBpBox").addClass("show"),$(".miniRow").addClass("animate"),i.countTime(e.fuckTime,e),"bp"==e.msgType||"ds"==e.msgType){var t=e.num,a=e.tid;0==e.isAuto&&void 0!==e.tid&&ajax_bp(a,t,function(){}),-1==usedId.indexOf(e.tid)&&0==e.isFail&&0==e.isAuto&&1!=e.isRepeat&&usedId.push(e.tid)}},function(){var t=allData.allImageUrl+allData.newDs[e.giftId].img;_loadImage(t,function(){if($("#miniBpBox").addClass("show"),$(".miniRow").addClass("animate"),$("#flashContent").html('<img src="'+t+'" />'),i.countTime(e.fuckTime,e),"bp"==e.msgType||"ds"==e.msgType){var a=e.num,n=e.tid;0==e.isAuto&&void 0!==e.tid&&ajax_bp(n,a,function(){}),-1==usedId.indexOf(e.tid)&&0==e.isFail&&0==e.isAuto&&1!=e.isRepeat&&usedId.push(e.tid)}})})},active:function(e){if("richUser"==e.msgType)return activeControl.richer(e);var t='<div class="miniRow">';t+='<div class="miniRow_user">',t+='<span class="miniRow_headBox '+e.sex+'"></span><img class="miniRow_head" src="'+e.head+'" /></div>',t+='<div class="miniRow_userName">'+e.userName+"</div>",t+='<div class="miniRow_msg miniRow_active">';var i="",a="",n="",s="",o="";if("redBag"==e.msgType)i="miniActive_rbBorder1",a="miniActive_rbBorder2",n="miniBp_redBager",s="miniBp_rb",o=allData.allImageUrl+"miniBp_rb.png";else if("song"==e.msgType){i="miniActive_songBorder1",a="miniActive_songBorder2",n="miniBp_singer",s="miniBp_song",o=allData.allImageUrl+"miniBp_song.png";var l=d.getTextLength(e.msg),r="";l<=8?r="miniFont8":l<=16?r="miniFont16":l<=24?r="miniFont24":l<=40&&(r="miniFont40"),t+='<div class="miniActive_text"><div class="table"><span class="tableSpan '+r+'">'+e.msg+"</span></div></div>"}else"richUser"==e.msgType&&(i="miniActive_richBorder1",a="miniActive_richBorder2",n="miniBp_richer",s="miniBp_yb",o=allData.allImageUrl+"miniBp_yb.png");t+='<div class="miniActive_borderBox"><span class="miniActive_border1 '+i+'"></span><span class="miniActive_border2 '+a+'"></span>',t+='<span class="'+n+'"></span><span class="'+s+'"></span>',t+="</div></div>",t+='<div class="miniActive_area">';for(var c=1;c<11;c++)t+='<img class="mini_active_img mini_active_img'+c+'" src="'+o+'" />';t+="</div>","song"==e.msgType&&(t+='<div class="miniRow_foot miniRow_active">',t+="<p><"+e.songName+">——"+e.singer+"</p>",t+="</div>"),t+="</div>",$("#miniBpBox").html(t);var c=0,h=setInterval(function(){0==c?($("#miniBpBox .miniActive_border1").hide(),$("#miniBpBox .miniActive_border2").show(),c=1):($("#miniBpBox .miniActive_border1").show(),$("#miniBpBox .miniActive_border2").hide(),c=0)},500);setTimeout(function(){clearInterval(h)},1e4),this.after(e)},after:function(e){if("bp"==e.msgType){var t=d.checkDelete(e),i=this;if(!t)return i.close(function(){d.clear(),setTimeout(function(){d.start()},500)})}if("bp"==e.msgType||"ds"==e.msgType){var a=e.num,n=e.tid;e.isLoop;0==e.isAuto&&void 0!==e.tid&&setTimeout(function(){ajax_bp(n,a,function(){})},1e3),0==e.isFail&&0==e.isAuto&&1!=e.isRepeat&&void 0!==e.tid&&-1==usedId.indexOf(e.tid)&&usedId.push(e.tid)}var i=this;setTimeout(function(){$("#miniBpBox").addClass("show"),$(".miniRow").addClass("animate"),$(".miniRow_bpVideo").addClass("animate"),$(".miniRow_bpImg").length>0&&($($(".miniRow_bpImg")[0]).addClass("animate"),$(".miniRow_bpImg").length>1&&i.changeImg($(".miniRow_bpImg")[0])),0==s.default.data.bg&&videoControl.loop.stop();var t=e.fuckTime;i.countTime(t,e)},0)},changeImg:function(e){var t=this;this.able&&setTimeout(function(){var i=$(e).index()+1;i=i>=$(e.parentNode).find(".miniRow_bpImg").length?0:i;var a=$(e.parentNode).find(".miniRow_bpImg")[i];$(a).removeClass("remove").addClass("animate"),$(e).addClass("remove").removeClass("animate"),t.changeImg(a)},5e3)},countTime:function(e,t){var i=this;$(".danmuBox").addClass("hide"),e=parseInt(e),setTimeout(function(){setTimeout(function(){if("bp"==t.msgType){if(!d.checkDelete(t))return i.close(function(){d.clear(),setTimeout(function(){d.start()},500)})}if(-1==--e)return void i.close(function(){d.clear(),setTimeout(function(){d.start()},500)});"bp"==t.msgType&&d.saveBp.save(t,e),$("#bpTime").html(e),setTimeout(arguments.callee,1e3)},1e3)},1e3)},close:function(e){this.able=!1,$(".miniRow").addClass("close"),setTimeout(function(){$("#miniBp").remove(),e&&e()},450)}},delBp:function(){d.saveBp.clear(),d.clear(),setTimeout(function(){d.start()},500)},deleteId:[],toDel:function(e){-1==this.deleteId.indexOf(e)&&this.deleteId.push(e)},checkDelete:function(e){return void 0===e.tid||null==e.tid||""==e.tid||(0==this.deleteId.length||-1==this.deleteId.indexOf(e.tid))},saveBp:{load:function(){var e=localStorage.getItem("bpObj"),t=localStorage.getItem("bpTime");try{null!=e&&""!=e&&null!=t&&0!=t&&parseInt(t)>1&&(e=JSON.parse(e),e.fuckTime=e.richTime=parseInt(t)+1,e.isRepeat=!0,e.num=1,e.maxLoop=1,ajax_isDel(e.tid,function(t){if("true"==t)return d.add(e);d.saveBp.clear()},function(){}))}catch(e){}},save:function(e,t){try{var i=JSON.stringify(e);localStorage.setItem("bpObj",i),localStorage.setItem("bpTime",t)}catch(e){}},clear:function(){localStorage.setItem("bpObj",""),localStorage.setItem("bpTime",0)}},usedId:[],config:{},noImg:function(e){$(e).attr({src:allImage.noImgSrc})},setImageAnimate:function(e){s.default.data.bpAnimate=e},setAudio:function(e){s.default.data.bpAudio=e},setCount:function(e){this.isCount=e},imageAnimateTimeout:null,able:!0,isCount:!0,used:[],list:[],maxNum:10,manage:{loadTime:8e3,isLoad:!1,timeout:null,startCount:function(e,t){this.isLoad=!1,this.timeout=setTimeout(function(){!d.manage.isLoad&&t&&t()},this.loadTime)},stopCount:function(){this.isLoad=!0,clearTimeout(this.timeout)},addFail:function(e){d.list.push(e)}},bVideo:function(e){$(e).width()/$(e).height()>=1?$(e).css({width:900}):$(e).css({height:"100%"})},getBPname:function(e){var t="";switch(e.barpinTheme){case 1:t="生日霸屏";break;case 2:t="示爱霸屏";break;case 3:t="求约霸屏";break;case 4:t="求婚霸屏";break;case 5:t="女神霸屏";break;default:t="重金霸屏"}return t},onlyText:function(e){e.textType="type1";var t=("男"==e.sex?allImage.bpUser_man:allImage.bpUser_woman,"");e.maxLoop>1&&(t=" 第 "+(e.maxLoop-e.num+1)+" 次"),-1!=e.pascreenSort&&(t="");var i=-1==e.theme?"Bp":e.theme,a="";a+='<div class="newBpBoxCover"></div><div class="newBpBox"><div class="newBpMain onlyText">',a+='<div class="newBpHornBox full"><div class="_newBpHornBox">',a+='<span class="onWallBpHorn leftTopHorn onWallBpHorn_theme'+i+'"></span><span class="onWallBpHorn rightTopHorn onWallBpHorn_theme'+i+'"></span><span class="onWallBpHorn leftBottomHorn onWallBpHorn_theme'+i+'"></span><span class="onWallBpHorn rightBottomHorn onWallBpHorn_theme'+i+'"></span>',a+='<span class="onWallNewUserBox"><span class="onWallUserCircle1 '+("男"==e.sex?"onWallManCircle1":"onWallWomanCircle1")+'"></span>\t\t\t\t<span class="onWallUserCircle2 '+("男"==e.sex?"onWallManCircle2":"onWallWomanCircle2")+'"></span><span class="onWallHat1"></span>\t\t\t\t<img class="onWallNewUser" src="'+e.userPic+'" />';var n="bpHead_wing";"男"==e.sex?n+=" bpHead_manWing":n+=" bpHead_womanWing",a+='<tt class="'+n+'"><span></span><i>'+d.getBPname(e)+"</i></tt>",a+='<tt class="'+n+' right"><span></span><i>'+e.second+"秒</i></tt>",a+="</span>",a+='<div class="onWallBpNameDiv"><span class="themeName_theme themeName_theme'+i+'"></span>'+e.nickName+"</div>",a+='<div class="newBpHornBoxText">',a+='<b class="bpColor" id="newBpMsg">'+e.content+"</b></div>",a+='<div class="onWallBpTimeBox">',a+='<div class="themeCover_theme themeCover_theme'+i+'"></div>',a+='<tt><span class="themeLogo_theme themeLogo_theme'+i+'"></span>',null!=e.bpForName&&(a+="为 "+e.bpForName+" "),a+=d.getBPname(e)+' <b id="bpTime">'+e.second+"</b> 秒"+t,-1!=e.pascreenSort&&(a+=" <i>第"+e.pascreenSort+"位霸屏</i>"),a+="<tt></div>",a+="</div></div></div></div>",$(".bpMain").html(a),this.after(e)},onlyImage:function(e){var t=("男"==e.sex?allImage.bpUser_man:allImage.bpUser_woman,"");e.maxLoop>1&&(t=" 第 "+(e.maxLoop-e.num+1)+" 次"),-1!=e.pascreenSort&&(t="");var i=-1==e.theme?"Bp":e.theme,a='<div class="newBpBoxCover"></div><div class="newBpBox"><div class="newBpMain">';if(a+='<div class="newBp"><div id="newBpImageBox">',e.videoUrl)a+='<video id="newBpVideo" loop="loop" poster="'+e.src+'"></video>';else{if(a+='<div id="hehe" style="position:relative">',e._imgArr&&e._imgArr.length>1)for(var n=e._imgArr,s=0;s<n.length;s++)a+=0==s?'<img onload="bpControl.hehe(this)" class="newBpImage pos" src="'+n[s]+'" />':'<img class="newBpImage hide" src="'+n[s]+'" />';else a+='<img onload="bpControl.hehe(this)" class="newBpImage" src="'+e._imgArr[0]+'" />';a+="</div>"}a+="</div></div>",a+='<div class="newBpUser">',a+='<div class="newBpHornBox"><div class="_newBpHornBox onlyImg">',a+='<span class="onWallBpHorn mini leftTopHorn onWallBpHorn_theme'+i+'"></span>\t\t\t\t<span class="onWallBpHorn mini rightTopHorn onWallBpHorn_theme'+i+'"></span>\t\t\t\t<span class="onWallBpHorn mini leftBottomHorn onWallBpHorn_theme'+i+'">\t\t\t\t</span><span class="onWallBpHorn mini rightBottomHorn onWallBpHorn_theme'+i+'"></span>',a+='<span class="onWallNewUserBox"><span class="onWallUserCircle1 '+("男"===e.sex?"onWallManCircle1":"onWallWomanCircle1")+'"></span>\t\t<span class="onWallUserCircle2 '+("男"===e.sex?"onWallManCircle2":"onWallWomanCircle2")+'"></span><span class="onWallHat1"></span>\t\t<img class="onWallNewUser" src="'+e.userPic+'" />';var o="bpHead_wing mini";"男"===e.sex?o+=" bpHead_manWing":o+=" bpHead_womanWing",a+='<tt class="'+o+'"><span></span><i>'+d.getBPname(e)+"</i></tt>",a+='<tt class="'+o+' right"><span></span><i>'+e.second+"秒</i></tt>",a+="</span>",a+='<div class="onWallBpNameDiv mini"><span class="mini themeName_theme themeName_theme'+i+'"></span>'+e.nickName+"</div>",a+='<div class="newBpHornBoxText mini">',a+='<b class="bpColor" id="newBpMsg">'+e.content+"</b></div>",a+='<div class="onWallBpTimeBox mini"><div class="mini themeCover_theme themeCover_theme'+i+'"></div><tt><span class="mini themeLogo_theme themeLogo_theme'+i+'"></span>',null!=e.bpForName&&(a+="为 "+e.bpForName+" "),a+=d.getBPname(e)+' <b id="bpTime">'+e.second+"</b> 秒"+t,-1!=e.pascreenSort&&(a+=" <i>第"+e.pascreenSort+"位霸屏</i>"),a+="<tt></div>",a+="</div></div></div></div></div>",$(".bpMain").html(a);var l=this;e.videoUrl?this.loadVideo($("#newBpVideo"),e,function(){$("#newBpVideo").length>0&&($("#newBpVideo")[0].volume=0,$("#newBpVideo")[0].play(),d.bVideo($("#newBpVideo")[0])),l.after(e)}):this.after(e)},imageText:function(e){e.textType="type3";var t=("男"===e.sex?allImage.bpUser_man:allImage.bpUser_woman,"");e.maxLoop>1&&(t=" 第"+(e.maxLoop-e.num+1)+"次"),-1!=e.pascreenSort&&(t="");var i=-1==e.theme?"Bp":e.theme,a="";if(a+='<div class="newBpBoxCover"></div><div class="newBpBox"><div class="newBpMain">',a+='<div class="newBp"><div id="newBpImageBox">',e.videoUrl)a+='<video id="newBpVideo" loop="loop" poster="'+e.src+'"></video>';else{if(a+='<div id="hehe" style="position:relative">',e._imgArr&&e._imgArr.length>1)for(var n=e._imgArr,s=0;s<n.length;s++)a+=0==s?'<img onload="bpControl.hehe(this)" class="newBpImage pos" src="'+n[s]+'" />':'<img class="newBpImage hide" src="'+n[s]+'" />';else a+='<img onload="bpControl.hehe(this)" class="newBpImage" src="'+e._imgArr[0]+'" />';a+="</div>"}a+="</div></div>",a+='<div class="newBpUser">',a+='<div class="newBpHornBox full" style="padding-top:90px; padding-bottom:90px"><div class="_newBpHornBox" style="padding-top:115px;">',a+='<span class="onWallBpHorn small leftTopHorn onWallBpHorn_theme'+i+'"></span>\t\t\t<span class="onWallBpHorn small rightTopHorn onWallBpHorn_theme'+i+'"></span>\t\t\t<span class="onWallBpHorn small leftBottomHorn onWallBpHorn_theme'+i+'"></span>\t\t\t<span class="onWallBpHorn small rightBottomHorn onWallBpHorn_theme'+i+'"></span>',a+='<span class="onWallNewUserBox"><span class="onWallUserCircle1 '+("男"===e.sex?"onWallManCircle1":"onWallWomanCircle1")+'"></span>\t\t<span class="onWallUserCircle2 '+("男"===e.sex?"onWallManCircle2":"onWallWomanCircle2")+'"></span><span class="onWallHat1"></span>\t\t<img class="onWallNewUser" src="'+e.userPic+'" />';var o="bpHead_wing mini";"男"===e.sex?o+=" bpHead_manWing":o+=" bpHead_womanWing",a+='<tt class="'+o+'"><span></span><i>'+d.getBPname(e)+"</i></tt>",a+='<tt class="'+o+' right"><span></span><i>'+e.second+"秒</i></tt>",a+="</span>",a+='<div class="onWallBpNameDiv mini"><span class="mini themeName_theme themeName_theme'+i+'"></span>'+e.nickName+"</div>",a+='<div class="newBpHornBoxText mini">',a+='<b class="bpColor" id="newBpMsg">'+e.content+"</b></div>",a+='<div class="onWallBpTimeBox mini" style="bottom:-75px"><div class="themeCover_theme mini themeCover_theme'+i+'"></div><tt><span class="themeLogo_theme mini themeLogo_theme'+i+'"></span>',null!=e.bpForName&&(a+="为 "+e.bpForName+" "),a+=d.getBPname(e)+' <b id="bpTime">'+e.second+"</b> 秒"+t,-1!=e.pascreenSort&&(a+=" <i>第"+e.pascreenSort+"位霸屏</i>"),a+="<tt></div>",a+="</div></div></div></div></div>",$(".bpMain").html(a);var l=this;e.videoUrl?this.loadVideo($("#newBpVideo"),e,function(){$("#newBpVideo").length>0&&($("#newBpVideo")[0].volume=0,$("#newBpVideo")[0].play(),d.bVideo($("#newBpVideo")[0])),l.after(e)}):this.after(e)},old:{onlyText:function(e){var t=d.getBPname(e),i='<div class="oldBpText"><div class="table"><span class="tableSpan">';null!=e.bpForName?(i+='<div class="oldBpForTa">为 <tt>'+e.bpForName+"</tt> "+t,-1!=e.pascreenSort?i+=" 第 <tt>"+e.pascreenSort+"</tt> 位霸屏":e.maxLoop>1&&(i+=" 第 <tt>"+(e.maxLoop-e.num+1)+"</tt> 次"),i+="</div>"):-1!=e.pascreenSort?i+='<div class="oldBpForTa"> 第 <tt>'+e.pascreenSort+"</tt> 位霸屏</div>":e.maxLoop>1&&(i+='<div class="oldBpForTa">霸屏 第 <tt>'+(e.maxLoop-e.num+1)+"</tt> 次</div>"),i+='<div class="oldBpFont" id="newBpMsg">'+e.content+"</div>",i+="</span></div>",i+='<div class="oldBpUserInfo"><img class="'+e.sex+'" src="'+e.userPic+'" />',i+='<span class="oldBpUserName">'+e.nickName+'<span class="oldBpCount">'+t+' <tt id="bpTime">'+e.second+'</tt> 秒<tt class="bpWMlogo"></tt></span></span>',i+="</div></div>";for(var a=1;a<=10;a++)i+='<img class="richStar richStar'+a+'" src="'+allImage.starSrc+'" />';$(".bpMain").html(i),d.after(e)},onlyImage:function(e){var t=d.getBPname(e),i='<div class="oldBpImage">';if(i+='<div class="oldBpLeft">',e.videoUrl)i+='<video id="oldBpVideo" loop="loop" poster="'+e.src+'"></video>';else if(e._imgArr&&e._imgArr.length>1)for(var a=e._imgArr,n=0;n<a.length;n++)i+=0==n?'<img class="oldBpLeftImage pos" onload="bpControl.animateImage(this)" src="'+a[n]+'" />':'<img class="oldBpLeftImage hide" src="'+a[n]+'" />';else i+='<img class="oldBpLeftImage" onload="bpControl.animateImage(this)" src="'+e._imgArr[0]+'" />';i+="</div>",i+='<div class="oldBpRight"><div class="oldBpUserInfo">',i+='<img class="'+e.sex+'" src="'+e.userPic+'" />',i+='<span class="oldBpUserName">'+e.nickName+"</span></div>",i+='<div class="table"><span class="tableSpan">',null!=e.bpForName?(i+='<div class="oldBpForTa">为 <tt>'+e.bpForName+"</tt> "+t,-1!=e.pascreenSort?i+=" 第 <tt>"+e.pascreenSort+"</tt> 位霸屏":e.maxLoop>1&&(i+="第 <tt>"+(e.maxLoop-e.num+1)+"</tt> 次"),i+="</div>"):-1!=e.pascreenSort?i+='<div class="oldBpForTa"> 第 <tt>'+e.pascreenSort+"</tt> 位霸屏</div>":e.maxLoop>1&&(i+='<div class="oldBpForTa">霸屏 第 <tt>'+(e.maxLoop-e.num+1)+"</tt> 次</div>"),i+="</span></div>",i+='<div class="oldBpCount">'+t+' <tt id="bpTime">'+e.second+'</tt> 秒<tt class="bpWMlogo"></tt></div>',i+="</div></div>",$(".bpMain").html(i),e.videoUrl?d.loadVideo($("#oldBpVideo"),e,function(){setTimeout(function(){videoControl.fullScreen($("#oldBpVideo")[0],e.videoData,$("#oldBpVideo")[0].parentNode),$("#oldBpVideo")[0].volume=0,$("#oldBpVideo")[0].play()},60),d.after(e)}):d.after(e)},imageText:function(e){var t=d.getBPname(e),i='<div class="oldBpBoth">';if(i+='<div class="oldBpLeft">',e.videoUrl)i+='<video id="oldBpVideo" loop="loop" poster="'+e.src+'"></video>';else if(e._imgArr&&e._imgArr.length>1)for(var a=e._imgArr,n=0;n<a.length;n++)i+=0==n?'<img class="oldBpLeftImage pos" onload="bpControl.animateImage(this)" src="'+a[n]+'" />':'<img class="oldBpLeftImage hide" src="'+a[n]+'" />';else i+='<img class="oldBpLeftImage" onload="bpControl.animateImage(this)" src="'+e._imgArr[0]+'" />';i+="</div>",i+='<div class="oldBpRight"><div class="oldBpUserInfo">',i+='<img class="'+e.sex+'" src="'+e.userPic+'" />',i+='<span class="oldBpUserName">'+e.nickName+"</span></div>",i+='<div class="table"><span class="tableSpan">',null!=e.bpForName?(i+='<div class="oldBpForTa">为 <tt>'+e.bpForName+"</tt> "+t,-1!=e.pascreenSort?i+=" 第 <tt>"+e.pascreenSort+"</tt> 位霸屏":e.maxLoop>1&&(i+="第 <tt>"+(e.maxLoop-e.num+1)+"</tt> 次"),i+="</div>"):-1!=e.pascreenSort?i+='<div class="oldBpForTa"> 第 <tt>'+e.pascreenSort+"</tt> 位霸屏</div>":e.maxLoop>1&&(i+='<div class="oldBpForTa">霸屏 第 <tt>'+(e.maxLoop-e.num+1)+"</tt> 次</div>"),i+='<div class="oldBpFont" id="newBpMsg">'+e.content+"</div>",i+="</span></div>",i+='<div class="oldBpCount">'+t+' <tt id="bpTime">'+e.second+'</tt> 秒<tt class="bpWMlogo"></tt></div>',i+="</div></div>",$(".bpMain").html(i),e.videoUrl?d.loadVideo($("#oldBpVideo"),e,function(){setTimeout(function(){videoControl.fullScreen($("#oldBpVideo")[0],e.videoData,$("#oldBpVideo")[0].parentNode),$("#oldBpVideo")[0].volume=0,$("#oldBpVideo")[0].play()},60),d.after(e)}):d.after(e)}},_ds:function(e){var t,i,a=this,n=allData.dsData,s=n;"cake"!=e.giftId?(t=n[e.giftId].name,i=e.giftId):(e.giftId="cake",t=n[e.giftId].name,i=e.giftId);var o='<div class="textMain">';o+='<div class="_textMain">',o+='<p class="textMain1 animate"><img class="'+e.sex+'" src="'+e.head+'" />'+e.userName+"</p>","cake"!=e.giftId?(o+='<p class="textMain2">打赏给 '+e.showName+"</p>",o+='<p class="textMain3"><tt>'+t+"</tt></p>",null!=e.msg&&$.trim(e.msg).length>0&&(o+='<p class="textMain0">'+e.msg+"</p>")):(o+='<p class="textMain2">为 '+e.toName+" 重金霸屏</p>",o+='<p class="textMain3"><tt>'+t+"</tt></p>",null!=e.msg&&$.trim(e.msg).length>0&&(o+='<p class="textMain0">'+e.msg+"</p>")),o+='<p class="textMain4">倒计时 <tt id="bpTime">'+e.giftTime+'</tt> 秒<tt class="bpWMlogo"></tt></p>',o+="</div>",o+='<p class="littleImageBox"><img onload="bpControl.setLittleImg(this)" class="littleImage" /></p>',o+='<div style="clear:both"></div>',o+="</div>",o+='<div class="richDsLeft"><div class="dsVideoCover"></div>',o+='<video id="dsVideo" loop="loop" poster="'+s[i].img+'"></video>',o+="</div>",o+='<div class="richDsRight"><div class="playerImgCover"></div><img class="playerImg" onload="bpControl.setImage(this,true)" /></div>',$(".bpMain").html(o);var a=this;e.videoUrl=allData.videoUrl+s[i].src,this.loadVideo($("#dsVideo"),e,function(){$(".littleImageBox .littleImage").attr({src:e.src}),$(".richDsRight .playerImg").attr({src:e.src}),setTimeout(function(){var e=$(".textMain")[0].offsetHeight,t=$(".textMain")[0].offsetWidth;$(".textMain").css({top:"50%",marginTop:e/-2,right:($("#bpControl").width()-t)/2}),$(".textMain").addClass("show"),setTimeout(function(){$(".textMain").addClass("animate"),$(".textMain").animate({right:0},1200),setTimeout(function(){if($(".playerImgCover").addClass("animate"),$(".dsVideoCover").addClass("animate"),$("#dsVideo").length>0){var e=$("#dsVideo")[0];videoControl.fullScreen(e,videoControl.defaultData,e.parentNode),$("#dsVideo")[0].play()}},1200)},1100)},360),a.after(e)})},ds:function(e){var t=e.giveInfo.goodsId,i=l.default.getById(t);e.fuckTime=i.time;var a=e.giveInfo.content;null!=a&&0!=a.length||(a="");var n="男"===e.sex?allImage.dsToMan:allImage.dsToWoMan,s='<div class="dsControlCover"><img class="dsToBg" src="'+allImage.newDsBg+'" /></div>';s+='<div id="dsControl">',s+='<div class="dsTop">',s+='<div class="dsSender"><img class="dsToCircle" src="'+n+'" /><img class="sendHead" src="'+e.userPic+'" /><span class="dsUserName">'+e.nickName+"</span></div>",s+='<div class="dsGeter"><img class="dsToCircle" src="'+allImage.dsToObj+'" /><img class="sendHead" src="'+(e.giveInfo.givenUserImgUrl||"")+'" /><span class="dsUserName">'+e.giveInfo.givenUserName+"</span></div>",s+='<div class="dsTopCenter"><p class="dsGiftName redColorFont">'+i.goodsName+"</p>",s+='<div><span class="redColorFont">'+a+"</span></div>",s+='<p class="dsJtBox"><span class="redColorFont">打赏给</span><img src="'+allImage.dsJt+'" /></p>';var o="";o=3==e.source?"私聊":"微上墙",""!=o&&(s+='<p class="dsFrom redColorFont">来源：'+o+"</p>"),s+="</div>",s+="</div>";var r='<img class="noSWFimg" src="'+i.goodsBigUrl+'" />';$('<div id="flashContent"></div>').appendTo("body");tools.loadImage(i.goodsBigUrl,function(){$(s+r+"</div>").appendTo("#all"),d.countTime(e.fuckTime,null,e)})},moveImage:function(e){App.public.centerImage(e,function(){d.onylImageAnimate(e)})},setLittleImg:function(e){if(e.offsetHeight>e.parentNode.offsetHeight){var t=(e.offsetHeight-e.parentNode.offsetHeight)/-2;$(e).css({top:t})}$(".textMain").css({paddingRight:$(e).width()+30})},clear:function(){$(".switchMain").removeClass("hidden"),$("#foot").removeClass("hidden"),$(".WM_QR").removeClass("hidden"),$(".danmuBox").removeClass("hide");var e=this;try{e.sliderObj.close(),e.sliderObj=null}catch(e){}if($("#jPlayerBox").length>0)try{jPlayerVideo.close()}catch(e){}else try{var t=$("#bpVideo");t.length>0&&t.remove()}catch(e){}0==s.default.data.bg&&videoControl.loop.reset(),$(window).unbind("resize.setImage"),clearTimeout(e.imageAnimateTimeout),audioControl.close(),$("#allBox").removeClass("hide"),$("#bpControl").removeClass("show wait"),$(".hwactive_img1").remove(),$(".hwactive_img2").remove(),$(".hwactive_img3").remove(),$(".hwgh_img1").remove(),$(".hwgh_img2").remove(),$(".hwgh_img3").remove(),$(".hwgh_img4").remove(),$(".hwgh_img5").remove(),$(".hwgh_img6").remove(),$(".hwgh_img7").remove(),$(".hwgh_img8").remove(),$(".hwactive_cat").remove(),$(".hwactive_spider").remove(),$(".hwactive_zombie").remove(),$("#hwanimation").html(""),e.bpFont.close(),e.closeBg(),$(".bpCover").html(""),$(".bpMain").html(""),$("#dsControl").remove(),$(".dsControlCover").remove()},_show:function(e){if("bp"==e.type){if(!this.checkDelete(e))return this.delBp()}(e.type==r.GIVE||e.status==c.BA)&&e.num>1&&d.loop(e),this.show(e)},loadVideo:function(e,t,i){e=e.length>0?e[0]:e;$(e).unbind("canplaythrough error stalled"),$(e).bind("canplaythrough",function(){$(e).unbind("canplaythrough error stalled"),"bp"==t.msgType&&(t.videoData=videoControl.getData(e)),i()}).bind("error stalled",function(){$(e).unbind("canplaythrough error stalled"),"bp"==t.msgType&&(t.videoData=null),i()}),$(e).attr({src:t.videoUrl}),e.load()},beforeBp:function(e,t,i){$("#beforeBpBox").remove();var a='<div id="beforeBpBox" class="hide"><video id="beforeBpVideo" src="'+e+'"></video></div>';$(a).appendTo($("body"));var n=$("#beforeBpVideo"),o=!1,l=null;$(n).unbind("canplaythrough error stalled"),$(n).bind("canplaythrough",function(){try{clearTimeout(l)}catch(e){}o||(o=!0,0==s.default.data.bg&&videoControl.loop.stop(),$(n).unbind("canplaythrough error stalled"),videoControl.fullScreen(n[0],{width:1280,height:720,dir:1280/720},$("#beforeBpBox")[0]),$("#allBox").addClass("hide"),$("#beforeBpBox").removeClass("hide"),n[0].play(),setTimeout(function(){"true"==d.isOpacity&&$("#beforeBpBox").css({visibility:"hidden"}),i(),setTimeout(function(){$("#beforeBpBox").remove()},500)},t))}).bind("error stalled",function(){try{clearTimeout(l)}catch(e){}o||(o=!0,$(n).unbind("canplaythrough error stalled"),$("#beforeBpBox").remove(),i())}),l=setTimeout(function(){o||(o=!0,$(n).unbind("canplaythrough error stalled"),$("#beforeBpBox").remove(),i())},1e4)},hw_loadImage:function(e,t){var i=new Image;i.onload=i.onerror=function(){t&&t()},i.src=e},hw_remove:function(){$(".hwactive_img1")&&$(".hwactive_img1").remove(),$(".hwactive_img2").remove(),$(".hwactive_img3").remove(),$(".hwgh_img1").remove(),$(".hwgh_img2").remove(),$(".hwgh_img3").remove(),$(".hwgh_img4").remove(),$(".hwgh_img5").remove(),$(".hwgh_img6").remove(),$(".hwgh_img7").remove(),$(".hwgh_img8").remove(),$(".hwactive_cat").remove(),$(".hwactive_spider").remove(),$(".hwactive_zombie").remove()},halloweenAnimation:function(e){var t=allData.allImageUrl+"/halloween",i=this,a={creat:function(){i.hw_remove();var e="";e+='<img src="'+t+'/ghost01.gif" class="hwgh_img1 cy_pa" style="z-index: 99999" alt="">',e+='<img src="'+t+'/ghost02.gif" class="hwgh_img2 cy_pa" style="z-index: 99999" alt="">',e+='<img src="'+t+'/ghost03.gif" class="hwgh_img3 cy_pa"  style="z-index: 99999" alt="">',e+='<img src="'+t+'/ghost01.gif" class="hwgh_img4 cy_pa" style="z-index: 99999" alt="">',e+='<img src="'+t+'/ghost02.gif" class="hwgh_img5 cy_pa" style="z-index: 99999" alt="">',e+='<img src="'+t+'/ghost03.gif" class="hwgh_img6 cy_pa"  style="z-index: 99999" alt="">',e+='<img src="'+t+'/ghost02.gif" class="hwgh_img7 cy_pa" style="z-index: 99999" alt="">',e+='<img src="'+t+'/ghost03.gif" class="hwgh_img8 cy_pa"  style="z-index: 99999" alt="">',$("#bpControl").append(e)}},n={creat:function(){i.hw_remove();var e=t+"/cat.gif?t="+(new Date).getTime();i.hw_loadImage(e,function(){var t="";t+='<img src="'+e+'"  class="hwactive_cat cy_pa hwgh_cat" style="z-index: 99999;width: 100%;top: 100px;" alt="">',$("#bpControl").append(t)})}},s={creat:function(){i.hw_remove();var e=t+"/spider.gif?t="+(new Date).getTime();i.hw_loadImage(e,function(){var t="";t+='<img src="'+e+'" class="hwactive_spider cy_pa hwgh_spider" width="100%;" height="100%" style="z-index: 99999;top: 0;" alt="">',$("#bpControl").append(t)})}},o={creat:function(){i.hw_remove();var e=t+"/zombie.gif?t="+(new Date).getTime();i.hw_loadImage(e,function(){var t="";t+='<img src="'+e+'" class="hwactive_zombie cy_pa hwgh_zombie" style="z-index: 99999;top: 330px;width: 100%" alt="">',$("#bpControl").append(t)})}},l={creat:function(){i.hw_remove();var e="";e+='<img src="'+t+'/pumpkin.gif" class="hwactive_img1 cy_pa" style="z-index: 99999" alt="">',e+='<img src="'+t+'/pumpkin.gif" class="hwactive_img2 cy_pa" style="z-index: 99999" alt="">',e+='<img src="'+t+'/pumpkin.gif" class="hwactive_img3 cy_pa" style="z-index: 99999" alt="">',e+="</div>",$("#bpControl").append(e)}};if(1==e){l.creat();setTimeout(function(){i.hw_remove(),clearTimeout(null)},1e4)}else 2==e?a.creat():3==e?n.creat():4==e?s.creat():5==e&&o.creat()},halloween:function(e,t){var i={gets:function(e,t){var i=allData.allImageUrl+"/halloween",t=t;return i+"/"+e+"hw"+t+".gif"}},a={timer:null,len:0,speed:10,myclass:null,sex:"woman",creat:function(){$(".hw_container").remove();var t=["萌萌哒僵尸","小可爱僵尸","小仙女僵尸","洛丽塔僵尸","社会姐僵尸","女王僵尸","脑洞僵尸","女蛇精僵尸","二次元僵尸","小学生僵尸","小学生僵尸","吃货僵尸","辣妹僵尸","波霸僵尸","麦霸僵尸"],n=["小鲜肉僵尸","暖男僵尸","正太僵尸","社会哥僵尸","霸道总裁僵尸","硬汉僵尸","直男癌僵尸","污妖王僵尸","老司机僵尸","酒鬼僵尸","一杯倒僵尸","蹦迪僵尸","舞王僵尸","麦霸僵尸"],s=e.sex;this.sex=s;var o="萌萌哒僵尸";o="man"==s?n[this.random(0,14)]:t[this.random(0,15)];var l=this.random(1,4);this.myclass=""+s+l;var r=i.gets(s,l),c=r+"?t="+(new Date).getTime();a._loadImage(c,function(){var t="";t='<div class="cy_hw_container">',t+='<div class="hw_container">',t+='<div class="halloweenBox cy_pr">',t+='<div class="hw_touxian cy_pa">',t+='<div class="cy_pa cy_hw_text"><p class="ellipsis cy_hw_text">这是'+e.userName+'</p><p class="cy_hw_text">'+o+"</p></div>",t+="</div>",t+='<div class="cy_halloween cy_pa">',t+='<div class="cy_pr hw_'+s+l+'">',t+='<img src="'+c+'" class="cy_pa halloweenImg" alt="">',t+='<img src="'+e.head+'" class="hw_header cy_pa" alt="">',t+="</div>",t+="</div>",t+="</div>",t+="</div>",t+="</div>",$("#all").append(t),a.animation()})},_loadImage:function(e,t){var i=new Image;i.onload=i.onerror=function(){t&&t()},i.src=e},animation:function(){a.timer=setInterval(function(){"man2"==a.myclass&&(a.speed=7),a.len+=a.speed,$(".cy_halloween").css({transition:"transform .3s linear"}),$(".cy_halloween").css({transform:"translate3d(-"+a.len+"px,0,0)"}),"man2"==a.myclass?a.len>=320&&a.stop():a.len>=420&&(a.stop(),"man3"==a.myclass&&setTimeout(function(){$(".hw_man3 .hw_header").css({left:"263px",top:"268px"})},200))},70)},stop:function(){var e=allData.allImageUrl+"/halloween";clearInterval(a.timer),$(".halloweenBox").css({background:'url("'+e+'/linght.png") no-repeat',backgroundSize:" contain"}),setTimeout(function(){$(".cy_hw_container").remove(),t()},3e3)},random:function(e,t){var i=t-e,a=Math.random();return e+Math.round(a*i)}};a.creat()},show:function(e){if(2==s.default.data.bpType)return this.miniBp.use(e);if(e.type===r.RED_BAG)return activeControl.start(e);$("#bpControl").addClass("wait");e.fuckTime=10,e.fontAni=!1,e.type==r.GIVE&&e.giveInfo?(e.giveInfo.giftId=e.giftId=17,e.giftTime=e.fuckTime=allData.newDs[e.giveInfo.giftId].time,this.ds(e)):"cake"==e.msgType?(e.giftId="cake",e.giftTime=e.fuckTime=allData.dsData[e.giftId].time,this._ds(e)):"loveNight"==e.msgType?(e.fuckTime=e.richTime,1==s.default.data.bpType?$(".bpCover").html('<div id="bpVideoBg"><canvas style="opacity:0.3"></canvas></div>'):$(".bpCover").html('<div id="bpVideoBg"></div>'),this.loveNight(e)):e.status==c.BA&&(e.fontAni=!0,e.fuckTime=e.second,1==s.default.data.bpType?($(".bpCover").html('<div id="bpVideoBg"><canvas style="opacity:0.3"></canvas></div>'),e._imgArr&&e._imgArr.length?e.content?this.old.imageText(e):this.old.onlyImage(e):this.old.onlyText(e)):($(".bpCover").html('<div id="bpVideoBg"></div>'),e._imgArr&&e._imgArr.length?e.content?this.imageText(e):this.onlyImage(e):this.onlyText(e)))},after:function(e){this._after(e)},_after:function(e){$("#allBox").addClass("hide");var t=(e.num,e.tid,e.isLoop,this);e.status==c.BA&&(0==s.default.data.bpType?t.bgAnimate(e):t.bgCanvas()),e.status==c.BA&&($(".switchMain").addClass("hidden"),$("#foot").addClass("hidden"),$(".WM_QR").addClass("hidden")),setTimeout(function(){$("#bpControl").addClass("show"),0==s.default.data.bg&&videoControl.loop.stop(),e.fontAni&&t.fontAnimate(3,e.textType);try{s.default.data.bpAudio&&(null!=e.videoUrl&&""!=e.videoUrl||audioControl.play(allData.audioUrl["ds"==e.msgType?1:0]))}catch(e){}var i=e.fuckTime;t.countTime(i,null,e)},0)},loadImgs:{index:0,src:"",len:0,error:[],load:function(e,t){this.callback=t,this.index=0,this.src=e,this.error=[],e=e.split(","),this.len=e.length;for(var i=this,a=0;a<e.length;a++)i.loadImg(e[a])},setSrc:function(){for(var e=this.src.split(","),t=[],i=0;i<e.length;i++)-1==this.error.indexOf(e[i])&&t.push(e[i]);return t=t.join(",")},loadImg:function(e){var t=this,i=new Image;i.onload=function(){++t.index>=t.len&&t.callback(t.setSrc())},i.onerror=function(){t.index++,t.error.push(e),t.index>=t.len&&t.callback(t.setSrc())},i.src=e}},imageBg:function(){$(".bpCover").html('<div class="modeLow"><div></div><img src="'+allImage.bg+'" /></div>')},_hehe:function(e){d.showOne(e),setTimeout(function(){$(e.parentNode).css({transition:"all 0.5s"})},1e3)},showOne:function(e){if(e.naturalWidth/e.naturalHeight>=1)$(e.parentNode).css({width:950}),$(e).css({width:"100%"});else{var t=$("#all")[0].offsetHeight*(e.naturalWidth/e.naturalHeight);$(e.parentNode).css({width:t}),$(e).css({height:"100%"})}$(e).css({visibility:"visible"}),setTimeout(function(){$(e).removeClass("show").addClass("remove");var t=$(e.parentNode).find(".newBpImage"),i=$(e).index()+1;i=i>=t.length?0:i;var a=t[i];$(a).addClass("show"),d.showOne(a),setTimeout(function(){$(e).removeClass("remove show").css({visibility:"hidden"})},1e3)},6e3)},hehe:function(e){if($(e.parentNode).find(".newBpImage").length>1)return this._hehe(e);e.naturalWidth/e.naturalHeight>=1?$(e).css({width:950}):$(e).css({height:"100%"});var t=e.src;if(t=t.split("."),0==t.length||"png"==t[t.length-1].toLowerCase())return void App.public.showInfo("PNG格式的图片没有切换特效");$(e).css({visibility:"hidden"}),this.sliderObj=new sliderAnimate({hasOffset:!1,isNew:!0,img:$(".newBpImage")[0],box:$("#hehe")[0],offsetX:0,offsetY:0,firstDelay:500}),this.sliderObj.auto()},setOld:function(e){var t=$(e.parentNode).width()/$(e.parentNode).height();if($(e).width()/$(e).height()<=t){$(e).css({width:"100%",height:"auto",left:0});var i=($(e).height()-$(e.parentNode).height())/-2;$(e).css({top:i})}else{$(e).css({height:"100%",width:"auto",top:0});var a=($(e).width()-$(e.parentNode).width())/-2;$(e).css({left:a})}},_animateImage:function(e){for(var t=$(e.parentNode).find(".oldBpLeftImage"),i=0;i<t.length;i++)this.setOld(t[i]);$(e).css({visibility:"visible"}),setTimeout(function(){$(e).removeClass("show").addClass("remove");var t=$(e.parentNode).find(".oldBpLeftImage"),i=$(e).index()+1;i=i>=t.length?0:i;var a=t[i];$(a).addClass("show"),d._animateImage(a),setTimeout(function(){$(e).removeClass("remove show").css({visibility:"hidden"})},1e3)},5e3)},animateImage:function(e){if($(e.parentNode).find(".oldBpLeftImage").length>1)return this._animateImage(e);var t=0,i=0,a=$(e.parentNode).width()/$(e.parentNode).height();if($(e).width()/$(e).height()<=a){$(e).css({width:"100%",height:"auto",left:0});var n=($(e).height()-$(e.parentNode).height())/-2;$(e).css({top:n,visibility:"visible"}),i=n,t=0}else{$(e).css({height:"100%",width:"auto",top:0});var s=($(e).width()-$(e.parentNode).width())/-2;$(e).css({left:s,visibility:"visible"}),i=0,t=s}var o=e.src;if(o=o.split("."),0==o.length||"png"==o[o.length-1].toLowerCase())return void App.public.showInfo("PNG格式的图片没有切换特效");$(e).css({visibility:"hidden"}),this.sliderObj=new sliderAnimate({hasOffset:!0,isNew:!1,img:e,box:e.parentNode,offsetX:t,offsetY:i,firstDelay:500}),this.sliderObj.auto()},countTime:function(e,t,i){var a=this;t=null==t?-1:t,e=parseInt(e);var n=0,s=0;$(".danmuBox").addClass("hide"),setTimeout(function(){setTimeout(function o(){if("bp"==i.msgType){if(!d.checkDelete(i))return d.delBp()}if(e--,n+=1,s+=1,-1==e)return d.saveBp.clear(),a.clear(),-1!=t&&null!=i?void activeControl._start({active:t,sex:i.sex,head:i.userPic,userName:i.userName,pascreenSort:i.pascreenSort},1e4,function(){}):void setTimeout(function(){a.start()},500);"bp"==i.msgType&&d.saveBp.save(i,e),$("#bpTime").html(e),setTimeout(o,1e3)},1e3)},1e3)},createCircle:function(e){Circles.create({id:"bp-circle",radius:21,value:100,maxValue:100,width:2,text:function(e){return""},colors:["rgba(255,255,255,0.3)","rgba(255,255,255,0.7)"],duration:e+1e3})},add:function(e,t){("bp"!=e.msgType||this.checkDelete(e))&&(t=!!t,"cake"==e.msgType&&(null!=e.src&&0!=$.trim(e.src).length||(e.src=allImage.noCakeSrc)),e.maxLoop=e.screenNum||1,e.num=e.num||e.screenNum||1,e.theme=null==e.theme||0==e.theme.length?-1:e.theme,e._imgArr=e.msgImgUrl&&e.msgImgUrl.split("|"),e.toName=null==e.toName?"":e.toName,e.isFail=null!=e.isFail&&e.isFail,e.isAuto=null!=e.isAuto&&e.isAuto,e.isRepeat=null!=e.isRepeat&&e.isRepeat,e.isLoop=t,e.pascreenSort=e.pascreenSort||-1,this.list.push(e))},isOpacity:"false",init:function(){"true"==this.isOpacity&&0==s.default.data.bpType?$(".bpCover").addClass("opacity"):$(".bpCover").removeClass("opacity"),this.start()},start:function(){try{clearTimeout(d.con)}catch(e){}var e=this;this.con=setTimeout(function t(){if(e.list.length>0&&e.able){var i=e.list.shift();e._show(i)}else e.con=setTimeout(t,500)},500)},getRandom:function(e,t){return parseInt(Math.random()*(1+(t>e?t-e:e-t))+(t>e?e:t))},getTextLength:function(e){for(var t=0,i=/^[A-Za-z]+$/,a=0;a<e.length;a++)i.test(e.charAt(a))?t+=.5:t++;return t},fontAnimate:function(e,t){var i=s.default.data.bpFontSize;i="size"+i;var a=this,n=$.trim($("#newBpMsg").text());if(0!=n.length){var o="",l=n.length,r=t+" "+i+" ";r+=l<=2?"less2":l<=4?"less4":l<=6?"less6":l<=8?"less8":l<=18?"less18":l<=24?"less24":l<=36?"less36":"mini",r+=" "+App.bpFontStyle;for(var c=0;c<n.length;c++)o+='<span class="oneFont '+r+'">'+n.charAt(c)+"</span>";$("#newBpMsg").html(o),setTimeout(function(){var e=$("#newBpMsg .oneFont"),t=0;setTimeout(function i(){$(e[t]).css({transition:"0.3s all",transform:"translate3d(0,0,0) scale(1)",opacity:1}),t++,t<e.length?setTimeout(i,60):setTimeout(function(){a.bpFont.close()},1500)},50)},50)}},bgCanvas:function(){if(0!=$(".bpCover canvas").length){var e=$(".bpCover canvas")[0];e.width=$(".bpCover")[0].offsetWidth,e.height=$(".bpCover")[0].offsetHeight;var t=this.getRandom(0,canvasRichBg.animate.length-1);canvasRichBg.animate[t]($(".bpCover canvas")[0])}},bgAnimate:function(e){var t=videoControl.defaultData,i="";if(-1!=e.theme){var a=parseInt(e.theme);i=allData.videoUrl+allData.themeBgVideo[a]}else{var a=App.public.getRandom(0,allData.bpVideoBg.length-1);i=allData.bpVideoBg[a],-1==i.indexOf("/")?i=allData.videoUrl+i:allData.bpVideoBgData.length>a&&null!=allData.bpVideoBgData[a]&&(t=allData.bpVideoBgData[a])}$("#bpVideoBg").html('<video loop autoplay src="'+i+'"></video>'),videoControl.fullScreen($("#bpVideoBg video")[0],t,$("#bpVideoBg")[0]),$("#bpVideoBg video").length>0&&($("#bpVideoBg video")[0].volume=0)},closeBg:function(){$("#bpVideoBg").length>0&&$("#bpVideoBg").remove();try{canvasRichBg.close()}catch(e){}},setImage:function(e,t){$(e).addClass("bpInnerImage")},useSlide:function(e){var t=$(e.parentNode).width(),i=$(e.parentNode).height(),a=t/i,n=e.naturalWidth/e.naturalHeight,s=0,o=0;if(n<=a){o=(e.naturalHeight*(t/e.naturalWidth)-$(e.parentNode).height())/-2,s=0}else{var l=e.naturalWidth*(i/e.naturalHeight),r=(l-$(e.parentNode).width())/-2;o=0,s=r}this.sliderObj=new sliderAnimate({img:$(".bpLeft .bpFullImage")[0],box:$(".bpLeft")[0],offsetX:s,offsetY:o,firstDelay:800}),this.sliderObj.auto(),$(e).css({visibility:"hidden"})},onylImageAnimate:function(e){var t=this;clearTimeout(t.imageAnimateTimeout),$(e).css({transition:"none"}),$(e).css({transform:"translate(0,0)"})},getType:function(e){return Object.prototype.toString().call(e).replace("]","").split(" ")[1].toLowerCase()},loop:function(e){var t=$.extend({},e);t.num=parseInt(t.num)-1,d.add(t,!0)},setAble:function(e){this.able=e},toAdd:function(e){var t=this;e.forEach(function(e){e.status!==c.NOT_SHOW&&(e.type!==r.GIVE&&e.type!==r.RED_BAG&&e.status!==c.BA||t.add(e))})},loveNight:function(e){var t='<div class="newBpBoxCover"></div><div class="bpLoveNight">';t+='<div class="table"><span class="tableSpan">',t+='<div class="loveNightPcBox"><p><img src="'+allImage.loveNightSrc+'" /></p><div><img src="'+e.src+'" onload="App.public.centerImage(this)" /></div></div>',t+="</span></div>",t+='<div class="bpUserInfo">',t+='<span class="bpUserName"><img class="bpUserHead '+e.sex+'" src="'+e.head+'" />'+e.userName+"</span>",t+='<span class="bpTime">',t+='重金霸屏 <tt id="bpTime">'+e.richTime+'</tt> 秒<tt class="bpWMlogo"></tt></span>',t+="</div>",t+="</div>";for(var i=1;i<=10;i++)t+='<img class="richStar richStar'+i+'" src="'+allImage.starSrc+'" />';$(".bpMain").html(t),this.after(e)},sliceBox:function(){}};window.bpControl=d,t.default=d},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=a(n),o=i(3),l=a(o),r=i(4),c=a(r),d=i(9),h=a(d),m=i(6),u=(a(m),i(11)),p=a(u),g=i(7),f=a(g),v={data:{title:null,fontSize:null,_fontSize:null,light:null,msglight:null,sethwBp:null,codeOpen:null,msgOpen:null,msgDelay:null,_msgDelay:null,bg:null,videoCover:null,bpType:null,bpCount:null,msgNum:null,bpAudio:null,bgCanvas:null,marqueeOpen:null,marqueeSize:null,marqueeSpeed:null,marqueeDelay:null,setEntry:null,code:null,wxLeft:null,wxTop:null,bpFontSize:null,bpFontStyle:null,bpHeight:null,codeScale:null},_init:function(){var e=this.data;$("html").css({"font-size":e._fontSize+"px"}),p.default.setLight((10-e.light)/10),p.default.msgLight((10-e.msglight)/10),h.default.setAudio(e.bpAudio)},checkHeight:function(e){$(e).find(".secondMenu").height()>=window.innerHeight-52&&$(e).find(".secondMenuInner").css({"max-height":window.innerHeight-52,"padding-right":10});var t=$(e).offset().top+$(e).find(".secondMenu").height()+52,i=$(e).find(".secondMenu").height()+52;if(t>=window.innerHeight-10){var a=window.innerHeight-t-1;$(e).find(".secondMenu").css({top:a}),$(e).find(".secondMenu .iBorder").addClass("borderCenter");var n=$(e).find(".secondMenu .iBorder i").eq(0),s=$(e).find(".secondMenu .iBorder i").eq(1);$(n).css({height:-1*a-1}),$(s).css({height:i- -1*a-42,marginTop:42})}else $(e).find(".secondMenu").css({top:-1}),$(e).find(".secondMenu .iBorder i").css({height:"100%",marginTop:0}),$(e).find(".secondMenu .iBorder").removeClass("borderCenter")},init:function(e){if(e=null!=e&&e,this.initData(),e)return this._init();var t=this.data,i=this;$(".oneMenu").bind("mouseover",function(){i.checkHeight(this),$(this).addClass("sel"),$(this).find(".secondMenu").show()}).bind("mouseleave",function(){$(this).removeClass("sel"),$(this).find(".secondMenu").hide()}),this.bg=new c.default({box:$("#setBg"),options:["视频","图片","黑色背景","无背景"],check:t.bg,notNull:!0,multiple:!1,change:function(){var e=this.getCheck();bgControl.use(e),i.saveData("bg",e),3!=e?($("body").removeClass("opacity"),h.default.isOpacity="false",$(".bpCover").removeClass("opacity")):($("body").addClass("opacity"),h.default.isOpacity="true",1!=t.bpType&&$(".bpCover").addClass("opacity")),1==e?($("#forBgVideo").hide(),$("#forBgCanvas").show(),bgCanvas.setAble(!0),bgCanvas.use(t.bgCanvas)):(0==e?$("#forBgVideo").show():$("#forBgVideo").hide(),bgCanvas.setAble(!1),$("#forBgCanvas").hide()),i.checkHeight($(".oneMenu")[1])}}),this.videoCover=new s.default({box:$("#setVideoCover"),range:[4,10],isInt:!0,useRange:t.videoCover,change:function(e){$("#setVideoCoverInfo").text(e),bgControl.setVideoLight(e),i.saveData("videoCover",e)}}),this.bgCanvas=new c.default({box:$("#setBpCanvas"),options:["雪花","五星","圆点","无"],check:t.bgCanvas,notNull:!0,multiple:!1,change:function(){var e=this.getCheck();i.saveData("bgCanvas",e),bgCanvas.use(e)}}),this.fontSize=new s.default({box:$("#setFont"),range:[20,34],useRange:t._fontSize,change:function(e){var t=parseFloat(e).toFixed(1);$("#setFontInfo").text(t+"px"),$("html").css({"font-size":t+"px"}),i.saveData("_fontSize",t)}}),this.bpFontStyle=new c.default({box:$("#setBpFontStyle"),options:["微软雅黑","墨字体","少女体","饰艺体","综艺体"],check:t.bpFontStyle,notNull:!0,multiple:!1,change:function(){var e=this.getCheck();i.saveData("bpFontStyle",e);var t=["","bpFontStyle_mo","bpFontStyle_shaonv","bpFontStyle_sy","bpFontStyle_zy"];App.bpFontStyle=t[e]}}),this.light=new s.default({box:$("#setLight"),range:[2,10],isInt:!0,useRange:t.light,change:function(e){$("#setLightInfo").text(e);var t=(10-e)/10;p.default.setLight(t),i.saveData("light",e)}}),this.msglight=new s.default({box:$("#msgLight"),range:[2,10],isInt:!0,useRange:t.msglight,change:function(e){$("#msgLightInfo").text(e);var t=(10-e)/10;p.default.msgLight(t),i.saveData("msglight",e)}}),this.codeOpen=new l.default({box:$("#setCode"),check:t.codeOpen,click:function(e){$("#setCodeInfo").text(e?"显示":"隐藏"),p.default.setAble(e),i.saveData("codeOpen",e)}}),this.bpType=new c.default({box:$("#setBpType"),options:["酷炫","简洁"],check:t.bpType,notNull:!0,multiple:!1,change:function(){var e=this.getCheck();i.saveData("bpType",e),1==e?$(".bpCover").removeClass("opacity"):3==t.bg&&($(".bpCover").addClass("opacity"),h.default.isOpacity="true")}}),this.bpFont=new c.default({box:$("#setBpFont"),options:["大","中","小"],check:t.bpFontSize,notNull:!0,multiple:!1,change:function(){var e=this.getCheck();i.saveData("bpFontSize",e)}}),this.bpCount=new l.default({box:$("#setBpCount"),options:["酷炫","简洁"],check:t.bpCount,click:function(e){$("#setBpCountInfo").text(e?"开启":"关闭"),h.default.setCount(e),i.saveData("bpCount",e)}}),this.bpHeight=new s.default({box:$("#setBpHeight"),range:[70,100],isInt:!0,useRange:t.bpHeight,change:function(e){$("#setBpHeightInfo").text(e+"%"),$(".bpMain").css({top:(100-e)/-2+"%",transform:"scaleY("+e/100+")"}),i.saveData("bpHeight",e)}}),this.msgOpen=new l.default({box:$("#setMsg"),check:t.msgOpen,click:function(e){$("#setMsgInfo").text(e?"开启":"关闭"),f.default.setAble(e),i.saveData("msgOpen",e),e?$(".setMsg").show():$(".setMsg").hide()}}),this.msgDelay=new s.default({box:$("#setMsgDelay"),range:[2,8],useRange:parseInt(t._msgDelay/1e3),isInt:!0,change:function(e){$("#setMsgDelayInfo").text(e+"秒"),i.saveData("_msgDelay",1e3*e)}}),this.msgNum=new s.default({box:$("#setMsgNum"),range:[10,20],useRange:t.msgNum,isInt:!0,change:function(e){$("#setMsgNumInfo").text(e+"条"),i.saveData("msgNum",e)}}),this.bpAudio=new l.default({box:$("#setBpAudio"),check:t.bpAudio,click:function(e){$("#setBpAudioInfo").text(e?"开启":"关闭"),h.default.setAudio(e),i.saveData("bpAudio",e)}}),this.marqueeOpen=new l.default({box:$("#setMqShow"),check:t.marqueeOpen,click:function(e){$("#setMqShowInfo").text(e?"开启":"关闭"),i.saveData("marqueeOpen",e),e?$(".setMq").show():$(".setMq").hide()}}),this.marqueeSize=new s.default({box:$("#setMqSize"),range:[20,30],useRange:t.marqueeSize,isInt:!0,change:function(e){$("#setMqSizeInfo").text(e+"px"),$(".marquee").css({"font-size":e+"px"}),i.saveData("marqueeSize",e)}}),this.marqueeSpeed=new s.default({box:$("#setMqSpeed"),range:[1,4],useRange:t.marqueeSpeed,isInt:!0,change:function(e){$("#setMqSpeedInfo").text(e),i.saveData("marqueeSpeed",e)}}),this.marqueeDelay=new s.default({box:$("#setMqDelay"),range:[5,30],useRange:parseInt(t.marqueeDelay/1e3),isInt:!0,change:function(e){$("#setMqDelayInfo").text(e+"秒"),i.saveData("marqueeDelay",1e3*e)}}),this.setEntry=new l.default({box:$("#setEntry"),check:t.setEntry,click:function(e){i.saveData("setEntry",e)}}),$("#setOnWallTitle").val(t.title),$(".onWallHeadTitle").text(t.title),$("#setOnWallTitle").bind("input propertychange",function(){return $(".onWallHeadTitle").text(this.value),i.saveData("title",this.value),!1}),$(".secondMenu").hide().css({visibility:"visible"}),$("#systemControl").bind("mouseover",function(){$(".systemControlSpan tt").html('<i class="sj3"></i><i class="sj4"></i>'),$("#systemControl").css({transform:"translate(0,0)"})}).bind("mouseleave",function(){$(".systemControlSpan tt").html('<i class="sj1"></i><i class="sj2"></i>'),$(".secondMenuInner").css({"max-height":"auto","padding-right":0}),$("#systemControl").css({transform:"translate(-120px,0)"})})},saveData:function(e,t){this.data[e]=t,localStorage&&(e="title"==e?Global.Merchant.name:e,localStorage.setItem(e,t))},getData:function(e){if("undefined"==typeof localStorage)return null;var t="title"==e?allData.barName:e,i=localStorage.getItem(t);return null!=i?(i="true"===i||i,i="false"!==i&&i):(i="title"==e?"欢迎光临"+Global.Merchant.name:App.defaultCfg[e],i="true"===i||i,i="false"!==i&&i)},initData:function(){for(var e in this.data)this.data[e]="wxLeft"!=e&&"wxTop"!=e?this.getData(e):localStorage.getItem(e)},setDefault:function(){App.public.showInfo("已经为您还原到系统默认设置");var e=App.defaultCfg,t="欢迎光临"+Global.Merchant.name;$("#setOnWallTitle").val(t),$(".onWallHeadTitle").text(t),this.saveData("title",t),this.fontSize.setByRange(e._fontSize),this.light.setByRange(e.light),this.msglight.setByRange(e.msglight),this.sethwBp.setByRange(e.sethwBp),this.bpHeight.setByRange(e.bpHeight),this.codeOpen.setCheck(e.codeOpen),this.bgCanvas.fire(e.bgCanvas),this.bg.fire(e.bg),this.bpType.fire(e.bpType),this.bpFont.fire(e.bpFontSize),this.msgOpen.setCheck(e.msgOpen),this.msgDelay.setByRange(parseInt(e._msgDelay/1e3)),this.msgNum.setByRange(e.msgNum),this.bpAudio.setCheck(e.bpAudio),this.marqueeOpen.setCheck(e.marqueeOpen),this.marqueeSize.setByRange(parseInt(e.marqueeSize)),this.marqueeSpeed.setByRange(parseInt(e.marqueeSpeed)),this.marqueeDelay.setByRange(parseInt(e.marqueeDelay/1e3)),keyBroadControl.resetCode()}};window.SystemControl=v,t.default=v},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(5),s=a(n),o=i(19),l=(a(o),i(8)),r=(a(l),{able:!0,setType:function(e){},setAble:function(e){this.able=e,this.checkCode(),s.default.resetSwiper()},checkCode:function(){r.able?($("#msgBoxMain").removeClass("full"),$("#rightBox").addClass("show")):($("#msgBoxMain").addClass("full"),$("#rightBox").removeClass("show"))},resize:function(){var e=this;$(window).bind("resize",function(){e.setZoom()})},setZoom:function(e){e=e||$("#all");var t=$(window).width(),i=$(window).height();window.zoom=1,i>t+150?(zoom=t/1200,e.css({zoom:zoom}),$(".systemControlSpan").css({zoom:zoom})):(zoom=i/653,t/i>3&&t/1200>2&&(zoom+=.1),e.css({zoom:zoom}),$(".systemControlSpan").css({zoom:zoom}))},init:function(){this.createHead(),this.createMain(),this.createBg(),this.createBp(),this.createMarquee(),this.checkCode(),this.resize(),this.setZoom()},setLogo:function(e){var t=e.width<=46?58:e.width+14;$(".onWallHeadBox p").css({paddingLeft:t})},createHead:function(){$("#onWallHead").remove(),$('<div id="onWallHead"><div class="_onWallHead"><div class="onWallHeadBox posLeft"><p><img src="'+Global.Merchant.logoUrl+'" class="logo" onload="basicControl.setLogo(this)"><tt class="onWallHeadTitle"></tt></p></div></div></div>').appendTo($("#all"))},createFoot:function(e){var t='<div id="foot"><div><a data-time="'+e.bp.time+'" class="module_btn module_btn_bp sel" title="上墙消息" data-id="module_btn_bp"><tt id="module_btn_bp"></tt></a>';void 0!==e.yr&&1==e.yr.able&&(t+='<a class="module_btn module_btn_ds" data-id="module_btn_ds" title="艺人" data-time="'+e.yr.time+'"></a>',$('<div class="oneSwitch oneSwitch_yr _oneSwitch"><div class="oneSwitchBox"></div></div>').appendTo($(".switchBox"))),void 0!==e.pk&&1==e.pk.able&&(t+='<a class="module_btn module_btn_pk" data-id="module_btn_pk" title="PK" data-time="'+e.pk.time+'"></a>',$('<div class="oneSwitch oneSwitch_pk _oneSwitch"><div class="oneSwitchBox"></div></div>').appendTo($(".switchBox"))),void 0!==e.rb&&1==e.rb.able&&(t+='<a class="module_btn module_btn_rb" data-id="module_btn_rb" title="红包" data-time="'+e.rb.time+'"></a>',$('<div class="oneSwitch oneSwitch_rb _oneSwitch"><div class="oneSwitchBox"></div></div>').appendTo($(".switchBox"))),void 0!==e.song&&1==e.song.able&&(t+='<a class="module_btn module_btn_song" data-id="module_btn_song" title="点歌" data-time="'+e.song.time+'"></a>',$('<div class="oneSwitch oneSwitch_song _oneSwitch"><div class="oneSwitchBox"></div></div>').appendTo($(".switchBox"))),void 0!==e.richer&&1==e.richer.able&&(t+='<a class="module_btn module_btn_richer" data-id="module_btn_richer" title="壕榜" data-time="'+e.richer.time+'"></a>',$('<div class="oneSwitch oneSwitch_richer _oneSwitch"><div class="oneSwitchBox"></div></div>').appendTo($(".switchBox"))),t+='</div><div>yylive 秉烛科技<span class="copyWemewIcon"></span></div></div>',$(t).appendTo($("#all")),$(".module_btn").bind("click",function(){moduleSwitch.show(this,1)})},createMain:function(){$('<div id="onWallMain"><div id="msgBoxMain"><div id="moduleBox"></div><div id="msgBoxAll"><div id="msgBox"></div></div></div></div>').appendTo($("#allBox"))},createBg:function(){$('<div id="bgControl"></div>').appendTo($("body"))},createBp:function(){$('<div id="bpControl"><div class="bpCover"></div><div class="bpMain"></div></div>').appendTo($("#all"))},createMarquee:function(){$("#marqueeBox").remove(),$('<div class="marqueeBox" id="marqueeBox"><div class="marquee"></div></div>').appendTo($("#onWallHead"))},setLight:function(e){$(".lightCover").css({background:"rgba(0,0,0,"+e+")"})},msgLight:function(e){var t="";t+=".onWallMsg{background:rgba(0,0,0,"+e+")}",t+=".onWallMsg.themeMsg0{background:rgba(62,7,78,"+e+")}",t+=".onWallMsg.themeMsg1{background:rgba(7,11,71,"+e+")}",t+=".onWallMsg.themeMsg2{background:rgba(81,29,3,"+e+")}",t+=".onWallMsg.themeMsg3{background:rgba(81,10,18,"+e+")}",t+=".onWallMsg.themeMsg4{background:rgba(45,38,34,"+e+")}",t+=".onWallMsg.themeMsg5{background:rgba(79,80,59,"+e+")}",t+=".onWallMsg.themeMsg6{background:rgba(0,0,0,"+e+")}",t+=".onWallMsg.themeMsg7{background:rgba(0,0,0,"+e+")}",t+=".onWallMsg.themeMsgBp{background:rgba(0,0,0,"+e+")}",t+=".onWallMsg.songMsg{background:rgba(0,0,0,"+e+")}",$("#msglight").html(t)}});window.basicControl=r,t.default=r},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}i(13),i(14),i(15);var n=i(0),s=a(n),o=i(1),l=(a(o),i(2)),r=(a(l),i(3)),c=(a(r),i(4)),d=(a(c),i(16)),h=(a(d),i(17)),m=a(h),u=i(5),p=(a(u),i(6)),g=(a(p),i(18)),f=a(g),v=i(7),b=a(v),_=i(8),w=a(_),x=i(9);a(x);i(20);var y=i(10),B=a(y),C=i(21),T=a(C),I=i(22),S=(a(I),i(11)),M=a(S),D=i(23),k=a(D),A={index:0,createQ:function(e,t){Circles.create({id:e,radius:16,value:100,maxValue:100,width:1,text:function(e){return""},colors:["rgba(255,255,255,0.2)","rgba(255,255,255,0.8)"],duration:1e3*t})},callback:function(e){A.index=$(e).index(),$(".module_btn.sel").html(""),$(".module_btn.sel").removeClass("sel"),$(e).addClass("sel").removeClass("run"),A.clear($(e).index(),e),A.countTime()},clear:function(e,t){try{U.mySwiper.destory()}catch(e){}$(t).hasClass("module_btn_pk")||(T.default.able=!1);for(var i=$(".oneSwitch"),a=0;a<i.length;a++)0!=a&&a!=e&&$(i[a]).html('<div class="oneSwitchBox"></div>')},error:function(e,t){t&&App.public.showInfo(t),$(e).removeClass("run");var i=$(e).index(),a=i+1>=$(".module_btn").length?0:i+1;A.show($(".module_btn")[a])},ajax:function(e,t){t=null==t?0:t,$(e).addClass("run");$(e).index();$(e).hasClass("module_btn_bp")?A._show(e):$(e).hasClass("module_btn_ds")?U.ajax(function(){A._show(e)},function(i){i=1==t&&i,A.error(e,i)}):$(e).hasClass("module_btn_pk")?T.default._show(function(){A._show(e)},function(i){i=1==t&&i,A.error(e,i)}):$(e).hasClass("module_btn_rb")?W.ajax(function(){A._show(e)},function(i){i=1==t&&i,A.error(e,i)}):$(e).hasClass("module_btn_song")?N.ajax(function(){A._show(e)},function(i){i=1==t&&i,A.error(e,i)}):$(e).hasClass("module_btn_richer")&&H.ajax(function(){A._show(e)},function(i){i=1==t&&i,A.error(e,i)})},show:function(e,t){if(t=null==t?0:t,!$(e).hasClass("sel"))return $(".module_btn.run").length>0?App.public.showInfo("正在获取数据"):void(this.index!=$(e).index()&&(clearTimeout(this.timeout),this.ajax(e,t)))},_show:function(e){var t=$(e).index(),i=$(".oneSwitch._show");if(i.length>0&&(i=i[0],$(i).removeClass("_show").addClass("onClose"),setTimeout(function(){$(i).removeClass("onClose").css({"-webkit-transform":"translate3d(100%,0,0)"})},700)),$(".oneSwitch").length>t){var a=$(".oneSwitch")[t];$(a).addClass("onShow"),setTimeout(function(){$(a).removeClass("onShow").css({"-webkit-transform":"translate3d(0,0,0)"}).addClass("_show"),A.callback(e,t)},700)}},timeout:null,countTime:function(){if(!($(".module_btn").length<=1)){clearTimeout(this.timeout);var e=$.trim($(".module_btn.sel").attr("data-time")),t=$(".module_btn.sel").attr("data-id");$(".module_btn.sel").html('<tt id="'+t+'"></tt>'),A.createQ(t,e);$(".module_btn.sel").index();this.timeout=setTimeout(function(){var e=$(".module_btn.sel").index(),t=e+1>=$(".module_btn").length?0:e+1;A.show($(".module_btn")[t])},1e3*e)}}},W={ajax:function(e,t){var i=null;i=setTimeout(function(){t&&t()},1e4),ajax_getRedBag(function(a){try{clearTimeout(i)}catch(e){}W.init(a,e,t)},function(e){t(e)})},init:function(e,t,i){if(!e)return i("红包榜需要至少3位金主支持才能展示，发动现场金主发红包");if(e.length<3)return i("红包榜需要至少3位金主支持才能展示，发动现场金主发红包");var a=allImage.hb_hby,n=allImage.hb_jb,s="";s+='<div class="hitRedBox _myContainer">',s+='<div class="_redRain pa">',s+='<div class="_activeAnimate">',s+='<img src="'+a+'" class="_active_img1 _active_img" alt="">',s+='<img src="'+n+'" class="_active_img _active_img2" alt="">',s+='<img src="'+a+'" class="_active_img3 _active_img" alt="">',s+='<img src="'+n+'" class="_active_img _active_img4" alt="">',s+='<img src="'+a+'" class="_active_img5 _active_img" alt="">',s+='<img src="'+n+'" class="_active_img _active_img6" alt="">',s+='<img src="'+a+'" class="_active_img7 _active_img" alt="">',s+='<img src="'+n+'" class="_active_img _active_img8" alt="">',s+='<img src="'+a+'" class="_active_img3 _active_img9" alt="">',s+='<img src="'+n+'" class="_active_img _active_img10" alt="">',s+='<img src="'+a+'" class="_active_img11 _active_img" alt="">',s+='<img src="'+n+'" class="_active_img _active_img12" alt="">',s+='<img src="'+a+'" class="_active_img13 _active_img" alt="">',s+='<img src="'+n+'" class="_active_img _active_img14" alt="">',s+='<img src="'+a+'" class="_active_img13 _active_img" alt="">',s+='<img src="'+n+'" class="_active_img _active_img14" alt="">',s+="</div>",s+="</div>",s+='<img src="'+allImage.hb_tz+'" class="hitRedBg pa" alt="">',s+='<div class="hitRedRender clearfix">',s+='<div class="tc pr red_title_box ">',s+='<h3 class="red_title pa">快来一起砸红包</h3>',s+="</div>",s+='<div class="_boxRed2 pr">',s+="</div>",s+='<div class="_boxRed1 pr">',s+="</div>",s+='<div class="_boxRed3 pr">',s+="</div>",s+="</div>",$(".oneSwitch_rb .oneSwitchBox").html(s);for(var o=0;o<e.length;o++)switch(o){case 0:var l="";l+='<h3 userId="'+e[0].id+'"  class="pa winer1 ellipsis">'+e[0].name+"</h3>",l+='<p class="pa red_cont1">'+e[0].num+"个</p>",l+='<p class="pa red_money1">'+e[0].money+"元</p>",l+='<img src="'+e[0].shead+'" class="winer_header1 pa" alt="">',l+='<img src="'+allImage.hb_no1+'" class="red_1 pa" width="400px" alt="">',$("._boxRed1").append(l);break;case 1:var l="";l+='<h3 userId="'+e[1].id+'" class="pa winer2 ellipsis">'+e[1].name+"</h3>",l+='<p class="pa red_cont">'+e[1].num+"个</p>",l+='<p class="pa red_money">'+e[1].money+"元</p>",l+='<img src="'+e[1].shead+'" class="winer_header pa" alt="">',l+='<img src="'+allImage.hb_no2+'" class="red_2 pa" width="400px" alt="">',$("._boxRed2").append(l);break;case 2:var l="";l+='<h3 userId="'+e[2].id+'" class="pa winer2 ellipsis">'+e[2].name+"</h3>",l+='<p class="pa red_cont">'+e[2].num+"个</p>",l+='<p class="pa red_money">'+e[2].money+"元</p>",l+='<img src="'+e[2].shead+'" class="winer_header pa" alt="">',l+='<img src="'+allImage.hb_no3+'" class="red_3 pa" width="400px" alt="">',$("._boxRed3").append(l)}t()}},L={len:1,removearr:[],append:[],scroll:function(e){var t=0;e.len&&(this.len=e.len);for(var i=0;i<this.len;i++){t+=e.list[i].offsetHeight}var a=e.box[0].offsetTop;e.box.css({transition:"transform 1s"}),e.box.css({transform:"translate3d(0,"+(a-t-12)+"px,0)"}),setTimeout(function(){L.after(e.box,e.list)},1100)},after:function(e,t){0!=e.length&&(e.css({top:0}),e.css({transition:"none"}),setTimeout(function(){e.css({transform:"translate3d(0,0,0)"});for(var i=0;i<L.len;i++){t.eq(i).remove();var a=t[i],n=a.cloneNode(!0);e[0].appendChild(n)}},10))}},N={ajax:function(e,t){var i=null;i=setTimeout(function(){t&&t()},1e4),ajax_getSong(function(a){try{clearTimeout(i)}catch(e){}N.init(a,e,t)},function(e){t(e)})},init:function(e,t,i){if(clearInterval(N.cy_timer),0==e.isopen)return i("点歌功能已经关闭，在后台完成设置后可开启");var a=e.data;if(!a||0==a.length)return i("酒吧还没有设置好点歌歌单，在后台完成设置后可开启");var n="";n+='<div class="_songBox clearfix">',n+='<div class="_guideBox">',n+="</div>",n+='<div class="pr _songListBox" style="overflow: hidden;">',n+='<div class=" pa" id="colee">',n+=' <ul class="_songList" style="width: 70%" id="colee1">';for(var s=0;s<a.length;s++){var o=a[s];n+='<li class="tc _songName ellipsis">'+(s+1)+"-("+o.songname+")-"+o.singer+" </li>"}n+="</ul>",n+="</div>",n+="</div>",n+=" </div>",$(".oneSwitch_song .oneSwitchBox").html(n),$("._songName").length>5?N.cy_timer=setInterval(function(){if(0==$("._songList").length)return clearInterval(N.cy_timer);L.scroll({box:$("._songList"),list:$("._songList ._songName")})},2200):clearInterval(N.cy_timer),t()},cy_timer:null},H={ajax:function(e,t){var i=null;i=setTimeout(function(){t&&t()},1e4),ajax_getRicherList(function(a){try{clearTimeout(i)}catch(e){}H.init(a,e,t)},function(e){t(e)})},init:function(e,t,i){try{if(null==e||0==e.now.length&&0==e.all.length)return i("酒吧还没有壕榜用户")}catch(e){return i("酒吧还没有壕榜用户")}var a='<div id="zd_richer">';a+='<div class="zd_richer_head"><span><tt class="zd_richer_wing zd_richer_wing1"></tt>总壕榜<tt class="zd_richer_wing zd_richer_wing2"></tt></span></div>',a+='<div class="zd_richer_main">',a+='<div class="zd_richer_left"><span class="zd_richer_leftSpan"><img class="richer_no0" src="'+allImage.richer_no0+'" />',e.now.length>0?a+='<img class="zd_richer_top1" src="'+e.now[0].shead+'" /><tt class="ellipsis">'+e.now[0].nickname+"</tt>":a+='<img class="zd_richer_top1" src="'+allImage.richer_noUser+'" /><tt class="ellipsis">虚位以待</tt>',a+="</span></div>",a+='<div class="zd_richer_right"><div class="zd_richer_rows">';for(var n=e.all,s=0;s<n.length&&!(s>=9);s++){var o=allImage.richer_pt,l="richOtherText";0==s&&(l="rich1Text",o=allImage.richer_no1),1==s&&(l="rich2Text",o=allImage.richer_no2),2==s&&(l="rich3Text",o=allImage.richer_no3),a+='<span><img class="richer_no" src="'+o+'" /><img class="zd_richer_face" src="'+n[s].shead+'" /><tt class="'+l+'">'+n[s].nickname+"</tt>",s>2&&(a+='<i class="richOtherText">'+(s+1)+"</i>"),a+="</span>"}a+='</div></div><div style="clear:both;"></div>',a+="</div></div>",$(".oneSwitch_richer .oneSwitchBox").html(a),0==e.now.length&&$(".zd_richer_leftSpan").addClass("show"),t(),setTimeout(function(){var t=0;e.now.length>0&&($(".zd_richer_leftSpan").addClass("animate"),t=1e3);for(var i=$(".zd_richer_rows span"),a=0;a<i.length;a++)!function(e){setTimeout(function(){$(i[e]).addClass("animate")},200*e+t)}(a)},500)}},U={ajax:function(e,t){var i=null;i=setTimeout(function(){t&&t()},1e4),ajax_getYR(function(a){try{clearTimeout(i)}catch(e){}U.init(a,e,t)},function(e){t(e)})},init:function(e,t,i){if(!e||0==e.length)return i("酒吧还没有设置打赏艺人，在后台完成设置后可开启");var a="";a+='<div class="cy_yr_swiper-container">',a+='<div class="swiper-wrapper">';for(var n=0;n<e.length;n++){var s=e[n];if(a+='<div class=" clearfix swiper-slide">',a+='<div class="myActor">',a+='<div class="cy-yr-box1">',a+='<div class="yr_guide pr">',a+='<div class="pa _arrow">',a+="</div>",a+="</div>",a+="</div>",a+='<div class="photo">',a+='<img src="'+allImage.ds_yr_zp+'" class="pa ds_yr_zp"  width="340px" height="500px" alt="">',a+='<div class="pr cy_actorImg">',a+='<img onload="App.public.setImage(this)" src="'+s.head+'" class="pa  _actorImg" alt="">',a+="</div>",a+='<h3 class="yr_name ellipsis">'+s.job+"-"+s.name+"</h3>",a+="</div>",a+='<div class="goodList pr tc">',a+='<div class="_listTitle pa">',a+="</div>",a+='<div class="cy-yr-bg">',a+="</div>",a+='<div class="pa loopTxtBox" >',a+='<ul class="yr_textloop" id='+s.name+">",s.gift&&0!=s.gift.length){for(var o=s.gift.length>4?4:s.gift.length,l=0;l<o;l++)if(!(parseInt(s.gift[l].giftId)<12)){var r=s.gift[l];a+='<li class="goodsName pr tc">',a+='<img src="'+(allData.allImageUrl+allData.newDs[r.giftId].iconName)+'.png"class="pa lw-img" alt="">',a+='<p class="pa _name">'+allData.newDs[r.giftId].name+' &nbsp;&nbsp;&nbsp;<span class="cy_gift_num">X&nbsp;'+r.num+"</span></p>",a+="</li>"}}else a+='<li class="noGoods pr tc">',a+='<p class="tc cy_noGoods">没有礼物数据</p>',a+="</li>";a+=" </ul>",a+=" </div>",a+="</div>",a+="</div>",a+="</div>"}a+="</div>",a+="</div>",$(".oneSwitch_yr .oneSwitchBox").html(a),this.mySwiper=new Swiper(".cy_yr_swiper-container",{effect:"cube",cube:{slideShadows:!1,shadow:!0,shadowOffset:10,shadowScale:.2},autoplay:6e3,speed:2500,loop:!0}),t()},mySwiper:null};App.public.isHidden=function(){var e="";if(void 0!==document.hidden)e="hidden";else if(void 0!==document.mozHidden)e="mozHidden";else if(void 0!==document.msHidden)e="msHidden";else{if(void 0===document.webkitHidden)return function(){return!0};e="webkitHidden"}return function(){return document[e+""]}}(),App.public._showInfo=function(e){var t="",i=!1,a=!0;"string"==typeof e?t=e:(t=e.txt,i=null!=e.showClose&&e.showClose,a=null==e.autoClose||e.autoClose);var n,s=this;$(".wemewOnWall_showInfo").length>0&&$(".wemewOnWall_showInfo").remove();var o=App.public.getId(),l='<div id="'+o+'" class="wemewOnWall_showInfo"><div class="wemewOnWall_showInfo_main">'+t;i&&(l+='<span class="wemewOnWall_showInfo_close" title="关闭">&times;</span>'),l+="</div></div>",$(l).appendTo($("#all")),this.close=function(){$("#"+o).find(".wemewOnWall_showInfo_close").unbind("click"),$("#"+o).animate({opacity:0},200,function(){$("#"+o).remove()})},$("#"+o).find(".wemewOnWall_showInfo_close").bind("click",function(){try{clearTimeout(n),s.close()}catch(e){}}),a&&(n=setTimeout(function(){s.close()},3e3))},App.public.showInfo=function(e){new App.public._showInfo(e)},App.public.cookie={setCookie:function(e,t,i){var a=new Date;a.setDate(a.getDate()+i),t+="",document.cookie=e+"="+t+";expires="+a.toGMTString(),a=void 0},getCookie:function(e){for(var t=document.cookie.split(";"),i=0;i<t.length;i++){t[i]=t[i].replace(/[ ]/g,"");var a=t[i].split("=");if(a[0]==e)return a[1]}return null},delCookie:function(e){this.setCookie(e,"",-1)}};var O={init:function(){},loadDsVideo:function(e){e.onComplete=e.onComplete||function(){};var t=[];for(var i in allData.dsData)t.push(allData.videoUrl+allData.dsData[i].src);m.default.preload({src:t,noSupport:function(){e.onComplete()},onError:function(){e.onComplete()},onFail:function(){},onComplete:function(t){var i=0;for(var a in allData.dsData)allData.dsData[a].data=t.length>i?t[i]:null,i++;e.onComplete()}})},loadBpVideo:function(e){e.onComplete=e.onComplete||function(){};for(var t=[],i=0;i<allData.bpVideoBg.length;i++){var a=allData.bpVideoBg[i];-1==a.indexOf("/")&&(a=allData.videoUrl+a),t.push(a)}m.default.preload({src:t,noSupport:function(){e.onComplete()},onError:function(){e.onComplete()},onFail:function(){},onComplete:function(t,i){e.onComplete(),allData.bpVideoBgData=t,null!=e.type&&"exe"==e.type||f.default.init(i,t)}})},loadThemeVideo:function(e){e.onComplete=e.onComplete||function(){};for(var t=[],i=0;i<allData.themeVideo.length;i++)t.push(allData.videoUrl+allData.themeVideo[i]);for(var a=0;a<allData.themeBgVideo.length;a++)t.push(allData.videoUrl+allData.themeBgVideo[a]);m.default.preload({src:t,noSupport:function(){e.onComplete()},onError:function(){e.onComplete()},onFail:function(){},onComplete:function(t){e.onComplete()}})},loadThemeBgVideo:function(e){e.onComplete=e.onComplete||function(){};for(var t=[],i=0;i<allData.themeBgVideo.length;i++)t.push(allData.videoUrl+allData.themeBgVideo[i]);m.default.preload({src:t,noSupport:function(){e.onComplete()},onError:function(){e.onComplete()},onFail:function(){},onComplete:function(t){e.onComplete()}})},preloadVideo:function(e){e.onComplete=e.onComplete||function(){};var t=[];for(var i in allData.dsData)t.push(allData.videoUrl+allData.dsData[i].src);for(var a=[],i=0;i<allData.bpVideoBg.length;i++){var n=allData.bpVideoBg[i];-1==n.indexOf("/")&&(n=allData.videoUrl+n),a.push(n)}var s=0,o=function(){s>=2&&e.onComplete()};m.default.preload({src:t,noSupport:function(){s++,o()},onError:function(){s++,o()},onFail:function(){},onComplete:function(e){var t=0;for(var i in allData.dsData)allData.dsData[i].data=e.length>t?e[t]:null,t++;s++,o()}}),m.default.preload({src:a,noSupport:function(){s++,o()},onError:function(){s++,o()},onFail:function(){},onComplete:function(t,i){s++,o(),null!=e.type&&"exe"==e.type||f.default.init(i,t)}})},preloadImage:function(e){e.onComplete&&e.onComplete()}},j={checkDelay:3e3,actionDelay:5e3,running:!1,showTime:3500,list:[],addSign:function(e,t,i,a){if(""==e)return this.list.push({tid:e||"",name:t});for(var n=0;n<this.list.length;n++)if(this.list[n].tid==e)return;this.list.push({tid:e||"",name:t,sitNumber:i,txt:a})},removeList:function(e){0==e?this.list.shift():this.list.splice(e,1)},start:function(){var e=this;this.close(),setTimeout(function t(){if(e.runnig||0==e.list.length)return setTimeout(t,e.checkDelay);if(e.list.length>0){var i=e.list.shift();e.create(),""==i.tid?e.wineShow(i.name):e.signShow(i.name,i.sitNumber)}},e.checkDelay)},create:function(){var e='<div class="signUpBg1"><img src="'+allImage.signUpBg1+'" /></div>';e+='<div class="signUpBg2"><img src="'+allImage.signUpBg2+'" /></div>',e+='<div class="sendWineBg1"><img src="'+allImage.sendWineBg1+'" /></div>',e+='<div class="sendWineBg2"><img src="'+allImage.sendWineBg2+'" /></div>',e+='<div class="signShow"></div>',$(e).appendTo($("body"))},close:function(){$(".signUpBg1").remove(),$(".signUpBg2").remove(),$(".sendWineBg1").remove(),$(".sendWineBg2").remove(),$(".signShow").remove()},showBg:function(e){var t,i;0==e?(t=$(".signUpBg1"),i=$(".signUpBg2")):(t=$(".sendWineBg1"),i=$(".sendWineBg2")),t.addClass("open"),i.addClass("open")},closeBg:function(e){var t,i;0==e?(t=$(".signUpBg1"),i=$(".signUpBg2")):(t=$(".sendWineBg1"),i=$(".sendWineBg2")),t.removeClass("open"),i.removeClass("open")},init:function(){this.start()},wineShow:function(e){this.running=!0;var t='<span class="span">';t+='<tt class="wineOnWall"></tt>'+e+"</span>",$(".signShow").html(t),this.action(1)},signShow:function(e,t){this.running=!0;var i='<span class="span">';i+='<tt class="signOnWall"></tt>'+e,i+="&nbsp;在&nbsp;"+t+"&nbsp;求现场拼桌</span>",$(".signShow").html(i),this.action(0)},action:function(e){var t=!1,i=!1,a=this;setTimeout(function(){var n=$(".signShow span")[0].offsetHeight,s=($(".signShow").width()-$(".signShow span")[0].offsetWidth)/2;$(".signShow span").css({marginTop:n/-2,left:s}),$(".signShow span").addClass("open"),setTimeout(function(){a.showBg(e),setTimeout(function(){(t=!0)&&i&&(t=!1,i=!1,a.closeBg(e),a.running=!1,a.start())},3500)},1e3),setTimeout(function(){setTimeout(function(){$(".signShow").addClass("signLeave"),setTimeout(function(){i=!0,t&&i&&(t=!1,i=!1,a.closeBg(e),a.running=!1,a.start()),$(".signShow").html("").removeClass("signLeave")},500)},a.showTime)},1e3)},50)}},R={code:4,set:function(e){this.code="top"==e?1==this.code?3:2==this.code?4:3==this.code?1:2:1==this.code?2:2==this.code?1:3==this.code?4:3,this._set(),B.default.saveData("code",this.code)},setQR:function(){if("undefined"!=typeof QR&&null!=QR&&0!=QR.type){var e=0,t=0,i=0;if("undefined"!=typeof QR&&null!=QR){e=QR.scale*$(".WM_QR").width(),i=QR.scale*$(".WM_QR").height();var t=22*$(window).width()/100}if(1==this.code){var a=35+(t-e)/2;$(".WM_QR").offset({left:a,top:60})}else if(3==this.code){var a=35+(t-e)/2,n=$(window).height()-i-60;$(".WM_QR").offset({left:a,top:n})}else if(2==this.code){var a=$(window).width()-(t+e)/2-20;$(".WM_QR").offset({left:a,top:60})}else if(4==this.code){var n=$(window).height()-i-60,a=$(window).width()-(t+e)/2-20;$(".WM_QR").offset({left:a,top:n})}}},_set:function(e){1==this.code||2==this.code?($("#imageBox").css({top:"auto",bottom:0}),$("#beforeImageLoad").css({top:"auto",bottom:0})):($("#imageBox").css({top:0,bottom:"auto"}),$("#beforeImageLoad").css({top:0,bottom:"auto"})),1==this.code||3==this.code?($("#msgBoxMain").css({left:"auto",right:0}),$("#rightBox").css({right:"auto",left:0})):($("#msgBoxMain").css({left:0,right:"auto"}),$("#rightBox").css({right:0,left:"auto"})),this.setQR(),e||R.resetCode()},setPosition:function(){$(window).bind("keydown",function(e){"normal"==App.type&&(38==e.keyCode||40==e.keyCode?R.set("top"):37!=e.keyCode&&39!=e.keyCode||R.set("left"))})},init:function(){var e=parseFloat(B.default.data.codeScale);e=null==e?.7:e,this.code=B.default.data.code,window.QR=new tools.QR({src:Global.Merchant.qrcodeUrl,scale:e,resize:!1,init:function(){R._set(!0),R.setPosition();try{null!=B.default.data.wxLeft&&null!=B.default.data.wxTop&&QR.moveTo(B.default.data.wxLeft,B.default.data.wxTop)}catch(e){}},onMove:function(e,t){B.default.saveData("wxLeft",e),B.default.saveData("wxTop",t)},onMousewheel:function(){var e=this.scale;B.default.saveData("codeScale",e)}})},resetCode:function(){B.default.saveData("wxLeft",null),B.default.saveData("wxTop",null)}},z={next:0,now:0,speed:50,timeout:null,isOver:!1,animate:function(){if(!(this.next-this.now<=0)){var e=(this.next-this.now)*this.speed,t=this.next;this.now=this.next,this.running=!0,$("#wemewLoadingline2").stop().animate({left:t+"%"},e),$("#wemewLoadingGif").stop().animate({left:t+"%"},e,function(){z.running=!1,t>=100&&setTimeout(function(){if(!z.isOver){z.close();try{clearTimeout(z.timeout)}catch(e){}return void z.complete()}},500),z.next>t&&z.animate()})}},to:function(e){(e=e>100?100:e)-this.now<=0||(this.next=e,this.running||this.animate())},add:function(e){this.next+=e,this.next=this.next>100?100:this.next,this.running||this.animate()},close:function(){z.isOver=!0,$("#wemewLoading").remove()},complete:function(){},outTime:function(e){this.timeout=setTimeout(function(){z.isOver||(z.close(),z.complete())},e||16e3)}},F={hasFlash:!0,swfVersionStr:"0",params:{quality:"high",loop:"true",play:"false",wmode:"transparent",scale:"showall",menu:"false",devicefont:"false",salign:"",allowscriptaccess:"sameDomain"},error:function(){return},closeError:function(){clearInterval(F.inter),$(".SWFerror").remove()},check:function(){var e=0;if(document.all){var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");t&&(e=1,VSwf=t.GetVariable("$version"),parseInt(VSwf.split(" ")[1].split(",")[0]))}else if(navigator.plugins&&navigator.plugins.length>0){var t=navigator.plugins["Shockwave Flash"];if(t){e=1;for(var i=t.description.split(" "),a=0;a<i.length;++a)isNaN(parseInt(i[a]))||parseInt(i[a])}}this.hasFlash=e,e||this.error()},index:null,getData:function(e){var t=allData.newDs[e],i=t.width/t.height,a=window.innerHeight;return{height:a,width:a*i}},reset:function(){$(window).unbind("resize.swf").bind("resize.swf",function(){if(null!=F.index){var e=F.getData(F.index);$("#SWF").css({width:e.width,height:e.height})}})},_init:function(e,t,i){if(!this.hasFlash)return void(i&&i());this.index=e;var a=allData.newDs[e],n={},s={id:"miniSWF",name:"miniSWF",align:"middle"},o=this.getData(e);swfobject.embedSWF(allData.swfUrl+a.url+".swf","flashContent",o.width,o.height,F.swfVersionStr,"",n,F.params,s,function(e){if(e.success){var a=document.getElementById("miniSWF");a.style.display="block";var n=!1,s=setTimeout(function(){n||(n=!0,t&&t(),setTimeout(function(){$(a).addClass("show"),a.Play()},700))},8e3);setTimeout(function e(){n||(void 0!==a.PercentLoaded&&a.PercentLoaded()>=60?(n=!0,clearTimeout(s),t&&t(),setTimeout(function(){$(a).addClass("show"),a.Play()},700)):setTimeout(e,100))},100)}else $("#miniSWF").remove(),i&&i()})},init:function(e,t,i){if(!this.hasFlash)return void(i&&i());this.index=e;var a=allData.newDs[e],n={},s={id:"SWF",name:"SWF",align:"middle"},o=this.getData(e);swfobject.embedSWF(allData.swfUrl+a.url+".swf","flashContent",o.width,o.height,F.swfVersionStr,"",n,F.params,s,function(e){if(e.success){var a=document.getElementById("SWF");a.style.display="block";var n=!1,s=setTimeout(function(){n||(n=!0,t&&t(),setTimeout(function(){$(a).addClass("show"),a.Play(),F.reset()},700))},8e3);setTimeout(function e(){n||(void 0!==a.PercentLoaded&&a.PercentLoaded()>=60?(n=!0,clearTimeout(s),t&&t(),setTimeout(function(){$(a).addClass("show"),a.Play(),F.reset()},700)):setTimeout(e,100))},100)}else $("#SWF").remove(),i&&i()})},end:function(){$(window).unbind("resize.swf"),$("#SWF").remove(),$(".dsControlCover").remove(),$("#flashContent").remove(),$(".noSWFimg").remove(),$("#dsControl").remove()}},P=function(){M.default.init(),B.default.init(),m.default.init(),b.default.init(),s.default.init({merchantId:Global.merchantId})},V=function(){w.default.init(),R.init(),bpControl.init(),j.init(),b.default.firstLoad(),Promise.resolve({bp:{able:1,time:20},yr:{able:0,time:20},pk:{able:0,time:20},rb:{able:0,time:60},song:{able:0,time:120}}).then(function(e){console.log(e),M.default.createFoot(e),A.countTime()},function(){})},q=function(){bpControl.saveBp.load(),F.check(),P(),z.outTime(16e3),z.complete=function(){V()},O.preloadImage({onComplete:function(){z.add(25)}}),O.loadDsVideo({onComplete:function(){z.add(25)}}),O.loadBpVideo({onComplete:function(){z.add(25)}}),O.loadThemeVideo({onComplete:function(){z.add(25)}}),k.default.connect({chatId:Global.merchantId,callback:function(e){b.default.add(e),console.log(e),bpControl.toAdd(e)}})};$(function(){0==App.Browser.chrome?App.Browser.checkChrome(q):$.getJSON("/pc/getMerchant",{merchantId:Global.merchantId}).then(function(e){e&&0===e.code&&e.data?($.extend(Global.Merchant,e.data),document.title=e.data.name,q()):alert("酒吧信息获取失败！")},function(){alert("酒吧信息获取失败！")})})},function(e,t){},function(e,t,i){"use strict";var a={type:"normal",bpFontStyle:""};a.defaultCfg={title:"",bg:0,videoCover:5,bpType:0,fontSize:22,_fontSize:26,light:10,msglight:7,sethwBp:!0,codeOpen:!0,msgOpen:!0,msgDelay:5e3,_msgDelay:3e3,msgNum:20,bpAnimate:!0,bpAudio:!1,bgCanvas:1,bpCount:!0,marqueeOpen:!0,marqueeSize:24,marqueeSpeed:1,marqueeDelay:8e3,setEntry:!0,code:4,bpFontSize:0,bpFontStyle:0,bpHeight:100,codeScale:1},a.public={setImage:function(e,t){$(e).css({position:"absolute"});var i=$(e.parentNode).width(),a=$(e.parentNode).height(),n=i/a,s=e.naturalWidth/e.naturalHeight;if(s<=n){$(e).css({width:"100%",height:"auto",left:0});var o=e.naturalHeight*(i/e.naturalWidth),l=(o-$(e.parentNode).height())/-2;$(e).css({top:l,opacity:"1"}).attr({"data-pave":1}),s==n&&$(e).attr({"data-pave":0})}else{$(e).css({height:"100%",width:"auto",top:0});var r=e.naturalWidth*(a/e.naturalHeight),c=(r-$(e.parentNode).width())/-2;$(e).css({left:c,opacity:"1"}).attr({"data-pave":2})}t&&t()},centerImage:function(e,t){$(e).css({position:"absolute"});var i=$(e.parentNode).width(),a=$(e.parentNode).height(),n=i/a,s=e.naturalWidth/e.naturalHeight;if(s<=n){$(e).css({width:"100%",height:"auto",left:0});var o=e.naturalHeight*(i/e.naturalWidth),l=(o-$(e.parentNode).height())/-2;$(e).css({top:l,visibility:"visible"}).attr({"data-pave":1}),s==n&&$(e).attr({"data-pave":0})}else{$(e).css({height:"100%",width:"auto",top:0});var r=e.naturalWidth*(a/e.naturalHeight),c=(r-$(e.parentNode).width())/-2;$(e).css({left:c,visibility:"visible"}).attr({"data-pave":2})}t&&t()},getRandom:function(e,t){return parseInt(Math.random()*(1+(t>e?t-e:e-t))+(t>e?e:t))},getId:function(){return("wemewOnWall"+Math.random()+(new Date).getTime()).replace(".","")}},a.Utils||(a.Utils={},a.Utils.urlParam=function(){var e={},t=location.search;t&&(t=t.substr(1));for(var i=0,a=t.split("&"),n=0;n<a.length;n++)i=a[n].indexOf("="),e[a[n].substring(0,i)]=decodeURIComponent(a[n].substring(i+1));return function(t){return t?e[t]:e}}(),a.Utils.fmDate=function(e,t){function i(e){return e<10?"0"+e:e}var a=new Date(+e);t=t||"YYYY-MM-DD hh:mm:ss";var n=[a.getFullYear(),i(a.getMonth()+1),i(a.getDate())].join("-")+" "+[i(a.getHours()),i(a.getMinutes()),i(a.getSeconds())].join(":");return-1===t.indexOf("YYYY")&&(n=n.replace(/^\d{4}-/,"")),-1===t.indexOf("ss")&&(n=n.replace(/:\d{2}$/,"")),n},a.Utils.getTextLength=function(e){for(var t=0,i=/^\w$/,a=0;a<e.length;a++)i.test(e.charAt(a))?t+=.5:t++;return t}),window.Global={merchantId:a.Utils.urlParam("merchantId")||1,Merchant:{},WS_BASE:"http://120.79.15.148:8080"},/DEBUG/i.test(document.location.search)&&(Global.DEBUG=!0,Global.WS_BASE="http://120.79.153.237:8080"),window.App=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e={opera:0,ie:0,chrome:0,firefox:0,safari:0,konq:0,name:0,version:0},t=navigator.userAgent,i=e;return window.opera?(i.version=window.opera.version(),i.opera=parseFloat(i.version),i.name="oprea"):/AppleWebKit\/(\S+)/.test(t)?/Chrome\/(\S+)/.test(t)?(i.version=RegExp.$1,i.chrome=parseFloat(i.version),i.name="chrome"):/Version\/(\S+)/.test(t)&&(i.version=RegExp.$1,i.safari=parseFloat(i.version),i.name="safari"):/KHTML\/(\S+)/.test(t)||/Konqueror\/([^;]+)/.test(t)?(i.version=RegExp.$1,i.konq=parseFloat(i.version),i.name="konq"):/Firefox\/(\S+)/.test(t)?(i.version=RegExp.$1,i.firefox=parseFloat(i.version),i.name="firefox"):/MSIE ([^;]+)/.test(t)&&(i.version=RegExp.$1,i.ie=parseFloat(i.version),i.name="ie"),e}();a.checkChrome=function(e){var t='<div id="chrome" class="chrome"><div class="chromeBox">';t+='<div class="chromeText">为了能够更好的体验秉烛科技的功能，我们强烈建议您使用谷歌浏览器</div>',t+='<a class="downloadChrome" href="http://sw.bos.baidu.com/sw-search-sp/software/7164c4c6bc6e0/ChromeStandalone_58.0.3029.110_Setup.exe" target="_blank">下载谷歌浏览器</a>',t+='<a class="closeChrome">&times;</a>',t+="</div></div>",$(t).appendTo($("body")),$(".closeChrome").bind("click",function(){$("#chrome").remove(),e&&e()})},App.Browser=a,t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){var e="";if(void 0!==document.hidden)e="hidden";else if(void 0!==document.mozHidden)e="mozHidden";else if(void 0!==document.msHidden)e="msHidden";else{if(void 0===document.webkitHidden)return function(){return!0};e="webkitHidden"}}(),function(e){this.id=App.public.getId(),this.data=e,this.isClose=!1,this.firstDelay=e.firstDelay||0,this.first=!0,this.offsetX=this.data.offsetX||0,this.offsetY=this.data.offsetY||0,this.hasOffset=null==this.data.hasOffset||this.hasOffset,this.bg=this.data.bg||"#999",this.init()});a.prototype={init:function(){this.type=null,this.action=[this.animate1,this.animate2,this.animate3,this.animate4];var e=this,t=this.data.img;this.boxTop=0,this.boxLeft=0,this.data.isNew&&(this.boxLeft=(t.parentNode.offsetWidth-t.width)/2,this.boxTop=(t.parentNode.offsetHeight-t.height)/2,this.boxLeft=this.boxLeft<0?0:this.boxLeft,this.boxTop=this.boxTop<0?0:this.boxTop),$(window).bind("resize.sliderAnimate",function(){if(e.hasOffset){var i=0,a=0,n=$(t.parentNode).width()/$(t.parentNode).height();if($(t).width()/$(t).height()<=n){$(t).css({width:"100%",left:0});var s=($(t).height()-$(t.parentNode).height())/-2;$(t).css({top:s}),a=s,i=0}else{$(t).css({height:"100%"});var o=($(t).width()-$(t.parentNode).width())/-2;$(t).css({left:o}),a=0,i=o}e.data.offsetX=i,e.data.offsetY=a}null!=e.type&&e.reset.call(e)})},createOne:function(e,t,i,a,n,s){var o=document.createElement("div");$(o).css({width:e,height:t,left:-1*n,top:-1*s,"-webkit-perspective":e+"px",perspective:e+"px"}),o.className="oneSliderOut";var l=document.createElement("div");l.className="oneSliderInner",$(l).css({width:"100%",height:"100%",position:"relative","z-index":9,"transform-style":"preserve-3d",transform:"translateZ("+i/2*-1+"px) rotateY(0deg)"}).attr({tz:i/2*-1});var r=document.createElement("div");$(r).css({width:"100%",height:"100%",transform:"translateZ("+.5*i+"px)"}),r.innerHTML='<img style="left:'+(n+this.data.offsetX)+"px; top:"+(s+this.data.offsetY)+"px; width:"+a.width+"px; height:"+a.height+'px; " src="'+a.src+'" />';var c=document.createElement("div");$(c).css({width:i,height:"100%",left:-1*i,top:0,"transform-origin":"right",transform:"translateZ("+.5*i+"px) rotateY(-90deg)"});var d=document.createElement("div");$(d).css({width:i,height:"100%",left:e,top:0,"transform-origin":"left",transform:"translateZ("+.5*i+"px) rotateY(90deg)"});var d=document.createElement("div");$(d).css({width:i,height:"100%",left:e,top:0,"transform-origin":"left",transform:"translateZ("+.5*i+"px) rotateY(90deg)"});var h=document.createElement("div");$(h).css({width:"100%",height:i,left:0,top:-1*i,"transform-origin":"bottom",transform:"translateZ("+.5*i+"px) rotateX(90deg)"});var m=document.createElement("div");$(m).css({width:"100%",height:i,left:0,top:t,"transform-origin":"top",transform:"translateZ("+.5*i+"px) rotateX(-90deg)"});var u=document.createElement("div");return $(u).css({width:"100%",height:"100%",left:0,top:0,"transform-origin":"top",transform:"translateZ("+-.5*i+"px) rotateY(-180deg)"}).addClass("oneSliderBack"),u.innerHTML='<img style="left:'+(n+this.data.offsetX)+"px; top:"+(s+this.data.offsetY)+"px; width:"+a.width+"px; height:"+a.height+'px; " src="'+a.src+'" />',l.innerHTML=r.outerHTML+c.outerHTML+d.outerHTML+h.outerHTML+m.outerHTML+u.outerHTML,o.innerHTML=l.outerHTML,o.outerHTML},create:function(e,t,i){i=null==i?0:i;var a=e.parentNode.offsetWidth,n=e.parentNode.offsetHeight,s=document.createElement("div");s.id=this.id,s.className="sliderImageBox",$(s).css({left:this.boxLeft,top:this.boxTop,width:a,height:n});for(var o=this.cutX*this.cutY,l=Math.ceil(a/this.cutX),r=Math.ceil(n/this.cutY),c="",d=0;d<o;d++){var h=d%this.cutX*l*-1,m=parseInt(d/this.cutX)*r*-1;h=Math.ceil(h),m=Math.ceil(m),c+=this.createOne(l,r,this.z,e,h,m,i)}c+='<div style="clear:both"></div>',s.innerHTML=c,$(".sliderImageBox").remove(),$(s).appendTo(t)},getRandom:function(e,t){return parseInt(Math.random()*(1+(t>e?t-e:e-t))+(t>e?e:t))},animate1:function(){this.type=1,this.cutX=4,this.cutY=5,this.z=10,this.create(this.data.img,this.data.box),$(this.data.img).css({visibility:"hidden"});var e=this.data.box,t=["animate1_s1","animate1_s2","animate1_s3","animate1_s4","animate1_s5","animate1_s6","animate1_s7"],i=this,a=$(e).find(".oneSliderInner");setTimeout(function(){for(var e=0;e<a.length;e++)!function(e){var n=t[i.getRandom(0,6)],s=i.getRandom(0,200);setTimeout(function(){$(a[e]).addClass(n)},s)}(e)},i.first?i.firstDelay:0),setTimeout(function(){$("#"+i.id).remove(),$(i.data.img).css({visibility:"visible"})},i.first?i.firstDelay+2300:2300)},animate2:function(){this.type=2,this.cutX=1,this.cutY=10,this.z=80,this.create(this.data.img,this.data.box),$(this.data.img).css({visibility:"hidden"});var e=this.data.box,t=this,i=$(e).find(".oneSliderInner");setTimeout(function(){for(var e=0;e<i.length;e++)!function(e){setTimeout(function(){$(i[e]).addClass("animate2_s1")},80*e)}(e)},t.first?t.firstDelay:0),setTimeout(function(){$("#"+t.id).remove(),$(t.data.img).css({visibility:"visible"})},t.first?t.firstDelay+2e3:2e3)},animate3:function(){this.type=3,this.cutX=1,this.cutY=8,this.z=10,this.create(this.data.img,this.data.box),$(this.data.img).css({visibility:"hidden"});var e=this.data.box,t=this,i=$(e).find(".oneSliderInner");setTimeout(function(){for(var e=0;e<i.length;e++)!function(e){setTimeout(function(){$(i[e]).addClass("animate3_s1")},60*e)}(e)},t.first?t.firstDelay:0),setTimeout(function(){$("#"+t.id).remove(),$(t.data.img).css({visibility:"visible"})},t.first?t.firstDelay+1500:1500)},animate4:function(){this.type=4,this.cutX=3,this.cutY=5;this.cutX,this.cutY;this.z=10,this.create(this.data.img,this.data.box,"4"),$(this.data.img).css({visibility:"hidden"});var e=this.data.box,t=this,i=$(e).find(".oneSliderInner");setTimeout(function(){for(var e=0;e<i.length;e++)0==e||2==e||4==e||6==e||8==e||10==e||12==e||14==e?$(i[e]).addClass("animate4_s1"):$(i[e]).addClass("animate4_s2")},t.first?t.firstDelay:0),setTimeout(function(){$("#"+t.id).remove(),$(t.data.img).css({visibility:"visible"})},t.first?t.firstDelay+1400:1400)},auto:function(){var e=this,t=function(){0==e.action.length&&(e.action=[e.animate1,e.animate2,e.animate3,e.animate4]);var t=e.getRandom(0,e.action.length-1);e.action[t].call(e),e.action.splice(t,1),e.first=!1};setTimeout(function(){t()},0),this.timeout=setInterval(function(){e.isClose||t()},7e3)},reset:function(){null!=this.type&&this.create(this.data.img,this.data.box,this.type)},close:function(){this.isClose=!0,clearInterval(this.timeout),$(window).unbind("resize.sliderAnimate")}},window.sliderAnimate=a,t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={init:function(){0==document.createElement("video").canPlayType("video/mp4").length&&(this.useFlashPlayer=!0)},defaultData:{dir:1280/720,width:1280,height:720,time:5},useFlashPlayer:!1,getId:function(){return("Video"+Math.random()+(new Date).getTime()).replace(".","")},preload:function(e){var t=this;e.onError=e.onError||function(){},e.noSupport=e.noSupport||function(){},e.onFail=e.onFail||function(){},e.onLoad=e.onLoad||function(){},e.onComplete=e.onComplete||function(){};var i=e.src||[];document.createElement("video").canPlayType;if(0==i.length)return e.onComplete([],[]);var a=t.getId(),n=a+"video",s='<div id="'+a+'" style="visibility:hidden; position:absolute; width:0; height:0; overflow:hidden;"><video preload="auto" id="'+n+'"></video></div>';$(s).appendTo($("body"));var o=0,l=[],r=[];!function(){var s=function(){if(r.push(null),l.push(null),e.onFail(o),++o>=i.length)return $("#"+a).remove(),e.onComplete(l,r);$("#"+n).attr({src:i[o]})};$("#"+n)[0].volume=0,$("#"+n).bind("canplaythrough",function(){var s=t.getData(this);if(s.name=i[o],l.push(s),r.push(i[o]),e.onLoad(o,s),++o>=i.length)return $("#"+a).remove(),e.onComplete(l,r);$("#"+n).attr({src:i[o]})}),$("#"+n).bind("error",function(){if(4==this.error.code)return $("#"+a).remove(),void e.onError();s()}),$("#"+n).bind("stalled",function(){s()}),$("#"+n).attr({src:i[o]})}()},getData:function(e){e=e.length>0?e[0]:e;var t=e.videoWidth,i=e.videoHeight;return{dir:t/i,width:t,height:i,time:parseInt(e.duration)}},fullScreen:function(e,t,i){if(null!=t){i=i||window;var a=$(i).width(),n=$(i).height(),s=a/n;if(t.width/t.height<=s){$(e).css({width:a,height:"auto",left:0,top:"50%",marginLeft:0});var o=a/t.dir;$(e).css({marginTop:o/-2})}else{$(e).css({height:n,width:"auto",top:0,left:"50%",marginTop:0});var l=n*t.dir;$(e).css({marginLeft:l/-2})}}},loop:{able:!1,timeout:null,isStop:!1,close:function(){this.isStop=!1,this.able=!1,$(window).unbind("resize.videoControlLoop"),clearTimeout(this.timeout)},stop:function(){if(this.able&&!this.isStop){if(this.isStop=!0,this.able=!1,clearTimeout(this.timeout),1==$("#"+this.newId+" video").length)return void $("#"+this.newId+" video")[0].pause();var e=$("#"+this.newId+' video[mode="play"]'),t=$("#"+this.newId+' video[mode="wait"]');if(0!=e.length||0!=t.length){e.length>0&&(e=e[0]),t.length>0&&(t=t[0]);try{e.pause(),t.pause()}catch(e){}}}},reset:function(){if(this.isStop)if(this.isStop=!1,this.able=!0,1!=$("#"+this.newId+" video").length)a.loop.oneEnd(this.newId,this.videoList,this.result);else try{$("#"+this.newId+" video")[0].play()}catch(e){}},play:function(e,t,i){if(this.close(),null!=e&&0!=e.length){for(var n=0;n<e.length;)if(null==e[n])try{e.splice(n,1),t.splice(n,1)}catch(e){}else n++;if(this.able=!0,null==i){i=a.getId();var s='<div id="'+i+'" class="videoPlayBox" style="width:100%; height:100%; position:absolute; left:0; top:0; overflow:hidden; z-index:-1"></div>';$(s).appendTo($("body"))}if(this.videoList=e,this.result=t,this.newId=i,$(window).bind("resize.videoControlLoop",function(){var e=$("#"+i+' video[mode="play"]'),n=$("#"+i+' video[mode="wait"]');if(e.length>0){var s=$(e).attr("index");a.fullScreen(e[0],t[s])}if(n.length>0){var s=$(n).attr("index");a.fullScreen(n[0],t[s])}}),1!=e.length){var o=1>=e.length?0:1,s='<video id="videoPlay1" style="display:none;position:absolute" index="0" mode="play"></video><video id="videoPlay2" style="display:none;position:absolute" index="'+o+'" mode="wait"></video>';$(s).appendTo($("#"+i)),a.fullScreen($("#videoPlay1"),t[0]),$("#videoPlay1").attr({src:e[0]}),$("#videoPlay2").attr({src:e[o]}),$("#videoPlay1").show();try{$("#videoPlay1")[0].play()}catch(e){}var l=this;try{l.countTime(t[0].time,i,e,t)}catch(e){}}else{$("#"+i).html('<video id="videoPlay1" index="0" mode="play" loop src="'+e[0]+'" style="position:absolute"></video>'),a.fullScreen($("#videoPlay1"),t[0]);try{$("#videoPlay1")[0].play()}catch(e){}}}},countTime:function(e,t,i,n){if(this.able){var s=1e3*e;this.timeout=setTimeout(function(){a.loop.oneEnd(t,i,n)},s-100)}},oneEnd:function(e,t,i){if(this.able){var n=$("#"+e+' video[mode="play"]'),s=$("#"+e+' video[mode="wait"]');if(0!=n.length||0!=s.length){n=n[0],s=s[0];var o=$(s).attr("index"),l=o;l++,l=l>=t.length?0:l,$(n).hide().attr({mode:"wait",index:l,src:t[l]}),a.fullScreen(s,i[o]),$(s).show().attr({mode:"play"}),n.pause(),s.play();try{a.loop.countTime(i[o].time,e,t,i)}catch(e){}}}}}};window.videoControl=a,t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={playList:null,playData:null,type:null,init:function(e,t){this.playList=e,this.playData=t,$('<img class="onWallBg" src="'+allImage.bg+'" />').appendTo($("#bgControl")),this.ready=!0,null!=this.type&&this.use(this.type)},use:function(e){this.type=e,this.ready&&(0==e?($("#bgControl img").hide(),null!=this.playList&&0!=this.playList.length||App.public.showInfo("请在秉烛科技后台选择背景视频"),$('<div id="BgVideoBox"><div class="BgVideoBoxCover"></div></div>').appendTo($("#bgControl")),null!=SystemControl.data.videoCover&&this.setVideoLight(SystemControl.data.videoCover),videoControl.loop.play(this.playList,this.playData,"BgVideoBox")):1==e?($("#bgControl img").show(),videoControl.loop.close(),$("#BgVideoBox").remove()):($("#bgControl img").hide(),videoControl.loop.close(),$("#BgVideoBox").remove()))},setVideoLight:function(e){var t=(10-e)/10;$(".BgVideoBoxCover").css({opacity:t})}};window.bgControl=a,t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={list:[],_list:[],able:!0,timeout:null,runTimeout:null,isExe:!1,createExe:function(){this.isExe=!0,$("#marqueeBox").remove(),$('<div class="marqueeBox marqueeBoxExe" id="marqueeBox"><div class="marquee"></div></div>').appendTo($("#all"))},create:function(){$("#marqueeBox").remove(),$('<div class="marqueeBox" id="marqueeBox"><div class="marquee"></div></div>').appendTo($("#onWallHead"))},stop:function(){$(".onWallHeadBox").removeClass("posLeft"),this.able=!1,clearTimeout(this.timeout),clearTimeout(this.runTimeout),$(".marqueeBox").removeClass("show"),$(".marquee").html(""),$(".marquee").css({transition:"none"}),$(".marquee").css({transform:"translate3d(0,0,0)"})},open:function(){this.able=!0,$(".onWallHeadBox").addClass("posLeft"),this.start(!0)},setAble:function(e){if(e)return this.open();this.stop()},init:function(){var e="undefined"==typeof qixiBar?"false":qixiBar;e=-1!=allData.barName.indexOf("胡桃里")?"false":e;var t=this,i=!1;setTimeout(function(){i=!0},6e5),setTimeout(function(){ajax_getMarquee(function(e){e=void 0===e||null==e||0==e.length?[]:e,t._list=e,setTimeout(arguments.callee,6e4)},function(){setTimeout(arguments.callee,6e4)})},6e4),null!=allData.marqueeList&&allData.marqueeList.length>0&&(this.list=allData.marqueeList)},start:function(e){var t=this;this.isExe&&(systemControl.data.marqueeDelay=2e4);var i=systemControl.data.marqueeDelay-1e3;i=i<5e3?5e3:i,t.timeout=setTimeout(function(){t.isExe||$(".marqueeBox").css({left:$(".onWallHeadBox p")[0].offsetWidth+50}),null!=t._list&&t._list.length>0&&(t.list=t._list);try{clearTimeout(t.timeout)}catch(e){}t.timeout=setTimeout(function(){t.list.length>0&&t.able?t._start():t.start()},500)},1==e?0:i)},getWidth:function(){for(var e=$(".marquee .oneMarquee"),t=0,i=0;i<e.length;i++)t+=e[i].offsetWidth+250;return t},_start:function(){for(var e=this,t="",i=0;i<this.list.length;i++)t+='<span class="oneMarquee">'+this.list[i]+"</span>";$(".marquee").html(t+'<div style="clear:both"></div>'),$(".marqueeBox").addClass("show");var a=e.getWidth();e.run(a)},run:function(e){var t=this;e+=$(window).width();var i=(15-systemControl.data.marqueeSpeed)*(e/1e3);$(".marquee").css({transition:"transform "+i+"s linear"}),$(".marquee").css({transform:"translate3d("+-1*e+"px,0,0)"}),this.runTimeout=setTimeout(function(){$(".marqueeBox").removeClass("show"),$(".marquee").css({transition:"none"}),$(".marquee").css({transform:"translate3d(0,0,0)"}),t.start()},1e3*i)}};t.default=a},function(e,t,i){"use strict";!function(){var e=App.MsgModule.MSG_TYPE;App.MsgModule.STATUS;window.activeControl={time:1e4,interval:null,_start:function(e,t,i){var a=e.active,n="",s="";1==a?(n=allImage.qixi_broad1,s=allImage.qixi_jp1):2==a?(n=allImage.qixi_broad2,s=allImage.qixi_jp2):3==a?(n=allImage.qixi_broad3,s=allImage.qixi_jp3):4==a&&(n=allImage.qixi_broad4,s=allImage.qixi_jp3);var o='<div id="activeBox" class="activeBox">';o+='<img class="activeBg" src="'+allImage.activeBottom+'" />',o+='<img class="activeStar1" src="'+allImage.activeStar1+'" />',o+='<img class="activeStar2" src="'+allImage.activeStar2+'" />',o+='<div class="activeMain">',o+='<div style="text-align:center; font-size:42px; color:#3ffffd; font-weight:bold; padding-bottom:0px; position:relative; top:-50px">第 '+e.pascreenSort+" 位霸屏</div>",o+='<span class="activeUserBox '+e.sex+'" style="top:-20px">',o+='<tt class="ttAnimate1"></tt><tt class="ttAnimate2"></tt><tt class="ttAnimate3"></tt><img class="activeUserHead '+e.sex+'" src="'+e.head+'" />',o+="</span>",o+='<p class="activeBrand" style="top:-60px">',o+='<img class="active_redBrand" src="'+n+'" />',o+="</p>",o+='<p class="activeKh">'+e.userName+"</p>",o+="</div>",o+='<div class="activeAnimate" id="activeAnimate">';for(var l=1;l<=14;l++)o+='<img class="active_img active_img'+l+'" src="'+s+'" />';o+="</div>",o+="</div>",o+='<div class="activeBoxCover"></div>',$(o).appendTo($("#all"));var r=this;setTimeout(function(){setTimeout(function(){r.close(),i&&i()},t||5e3)},1e3)},start:function(t){var i="男"===t.sex?"man":"woman";if("richUser"==t.msgType)return this.richer(t);var a='<div id="activeBox" class="activeBox">';if("song"==t.msgType?(a+='<div class="songCover"></div>',a+='<img class="activeBg" src="'+allImage.activeBottomSong+'" />',a+='<img class="songBg" src="'+allImage.activeSongBg+'" />'):a+='<img class="activeBg" src="'+allImage.activeBottom+'" />',a+='<img class="activeStar1" src="'+allImage.activeStar1+'" />',a+='<img class="activeStar2" src="'+allImage.activeStar2+'" />',a+='<div class="activeMain '+("song"==t.msgType?"song":"")+'">',a+='<span class="activeUserBox '+i+'">',a+='<tt class="ttAnimate1"></tt><tt class="ttAnimate2"></tt><tt class="ttAnimate3"></tt><img class="activeUserHead '+i+'" src="'+t.userPic+'" />',a+="</span>",a+='<p class="activeBrand">',"redBag"==t.msgType?a+='<img class="active_redBrand" src="'+allImage.activeRedBrand+'" />':"richUser"==t.msgType?a+='<img id="active_richBrand" src="'+allImage.activeRichBrand1+'" />':"song"==t.msgType&&(a+='<img id="active_songBrand" src="'+allImage.activeSongBrand+'" />'),a+="</p>","song"==t.msgType?(a+='<p class="activeSong">'+t.nickName+" 点歌 （"+t.songName+"_"+t.singer+"）</p>",a+='<p class="activeSongLine"></p>',a+='<p class="activeSongText">'+t.content+"</p>"):a+='<p class="activeUserName '+i+'">'+t.nickName+"</p>",a+="</div>",a+='<div class="activeAnimate" id="activeAnimate">',"richUser"==t.msgType||t.type==e.RED_BAG){var n="";"richUser"==t.msgType?n=allImage.activeAcer:t.type==e.RED_BAG&&(n=allImage.activeRedBag);for(var s=1;s<=14;s++)a+='<img class="active_img active_img'+s+'" src="'+n+'" />'}a+="</div>",a+="</div>",a+='<div class="activeBoxCover '+("song"==t.msgType?"song":"")+'"></div>',$(a).appendTo($("#all"));var o="song"==t.msgType?2e4:1e4;this.count(o)},level:["铂金10级","铂金11级","铂金12级","钻石13级","钻石14级","钻石15级"],_richer:function(e,i){t.get(e.level);var a='<div id="richUserFace"><img id="gif" src="'+i+'" />';a+='<div class="levelLightBg"><img src="'+allImage.levelLightBg+'" /></div>',a+='<div class="richUserBg"><img src="'+allImage.levelLight+'" /></div>',e.level>=13?a+='<div class="richUser_box">':a+='<div class="richUser_box top">',a+='<p class="richUser_title">'+activeControl.level[parseInt(e.level)-10]+"用户驾到</p>",a+='<div class="richUser_user"><p class="richUser_user_p"><img class="richUser_user_hat" src="'+t.get(e.level).imgUrl+'" /><img  class="richUser_user_head" src="'+e.head+'" /></p>',a+='<p class="richUser_user_name ellipsis">'+e.userName+"</p></div>",a+="</div></div>",$(a).appendTo($("#all")),setTimeout(function(){$(".richUserBg").fadeIn(),$(".levelLightBg").fadeIn()},500),setTimeout(function(){$(".richUser_box").addClass("animate"),setTimeout(function(){$("#richUserFace").fadeOut(function(){$("#richUserFace").remove(),activeControl.close()})},1e4)},1500)},richer:function(e){var t=(new Date).getTime(),i="";if(e.level>=10&&e.level<=12)i=allData.allImageUrl+"level/userLevel_bj.gif?"+t;else{if(!(e.level>=13&&e.level<=15))return activeControl.close();i=allData.allImageUrl+"level/userLevel_zs.gif?"+t}_loadImage(i,function(){activeControl._richer(e,i)})},count:function(e){var t=this;$(".danmuBox").addClass("hide"),setTimeout(function(){t.close()},e)},close:function(){$("#activeBox").addClass("close"),setTimeout(function(){$(".danmuBox").removeClass("hide"),$(".activeBoxCover").remove(),$("#activeBox").remove(),bpControl.start()},500)}};var t={get:function(e){var t={};switch(t.newG="青铜1级",t.imgUrl=allData.allImageUrl+"level/qt1.png",t.fColor="qt_color",t.fBg="qt_bg",e){case 1:t.newG="青铜1级",t.imgUrl=allData.allImageUrl+"level/qt1.png",t.fColor="qt_color",t.fBg="qt_bg";break;case 2:t.newG="青铜2级",t.imgUrl=allData.allImageUrl+"level/qt2.png",t.fColor="qt_color",t.fBg="qt_bg";break;case 3:t.newG="青铜3级",t.imgUrl=allData.allImageUrl+"level/qt3.png",t.fColor="qt_color",t.fBg="qt_bg";break;case 4:t.newG="白银4级",t.imgUrl=allData.allImageUrl+"level/by1.png",t.fColor="by_color",t.fBg="by_bg";break;case 5:t.newG="白银5级",t.imgUrl=allData.allImageUrl+"level/by2.png",t.fColor="by_color",t.fBg="by_bg";break;case 6:t.newG="白银6级",t.imgUrl=allData.allImageUrl+"level/by3.png",t.fColor="by_color",t.fBg="by_bg";break;case 10:t.newG="铂金10级",t.imgUrl=allData.allImageUrl+"level/bj1.gif",t.fColor="bj_color",t.fBg="bj_bg";break;case 11:t.newG="铂金11级",t.imgUrl=allData.allImageUrl+"level/bj2.gif",t.fColor="bj_color",t.fBg="bj_bg";break;case 12:t.newG="铂金12级",t.imgUrl=allData.allImageUrl+"level/bj3.gif",t.fColor="bj_color",t.fBg="bj_bg";break;case 7:t.newG="黄金7级",t.imgUrl=allData.allImageUrl+"level/hj1.gif",t.fColor="hj_color",t.fBg="hj_bg";break;case 8:t.newG="黄金8级",t.imgUrl=allData.allImageUrl+"level/hj2.gif",t.fColor="hj_color",t.fBg="hj_bg";break;case 9:t.newG="黄金9级",t.imgUrl=allData.allImageUrl+"level/hj3.gif",t.fColor="hj_color",t.fBg="hj_bg";break;case 13:t.newG="钻石13级",t.imgUrl=allData.allImageUrl+"level/zs1.gif",t.fColor="zs_color",t.fBg="zs_bg";break;case 14:t.newG="钻石14级",t.imgUrl=allData.allImageUrl+"level/zs2.gif",t.fColor="zs_color",t.fBg="zs_bg";break;case 15:t.newG="钻石15级",t.imgUrl=allData.allImageUrl+"level/zs3.gif",t.fColor="zs_color",t.fBg="zs_bg"}return t}}}(),function(){function e(e,t){this._x=e||0,this._y=t||0}function t(t,i,a,n,s,o,l){this._id=t||"default",this._group=i||"default",this._position=a||new e,this._velocity=n||new e,this._size=s||1,this._life=Math.round(o||0),this._behavior=l||[]}var i=(Math.PI,Math.PI/180),a={between:function(e,t){return e+Math.random()*(t-e)}};e.create=function(t,i){return new e(t,i)},e.add=function(t,i){return new e(t.x+i.x,t.y+i.y)},e.subtract=function(t,i){return new e(t.x-i.x,t.y-i.y)},e.random=function(t){var i=new e;return i.randomize(t),i},e.distanceSquared=function(e,t){var i=e.x-t.x,a=e.y-t.y;return i*i+a*a},e.distance=function(e,t){var i=e.x-t.x,a=e.y-t.y;return Math.sqrt(i*i+a*a)},e.prototype={get x(){return this._x},get y(){return this._y},set x(e){this._x=e},set y(e){this._y=e},get magnitudeSquared(){return this._x*this._x+this._y*this._y},get magnitude(){return Math.sqrt(this.magnitudeSquared)},get angle(){return 180*Math.atan2(this._y,this._x)/Math.PI},clone:function(){return new e(this._x,this._y)},add:function(e){this._x+=e.x,this._y+=e.y},subtract:function(e){this._x-=e.x,this._y-=e.y},multiply:function(e){this._x*=e,this._y*=e},divide:function(e){this._x/=e,this._y/=e},normalize:function(){var e=this.magnitude;e>0&&this.divide(e)},limit:function(e){this.magnitude>e&&(this.normalize(),this.multiply(e))},randomize:function(e){e=e||1,this._x=2*e*(-.5+Math.random()),this._y=2*e*(-.5+Math.random())},rotate:function(e){var t=this.magnitude,a=(Math.atan2(this._x,this._y)*PI_HALF+e)*i;this._x=t*Math.cos(a),this._y=t*Math.sin(a)},flip:function(){var e=this._y;this._y=this._x,this._x=e},invert:function(){this._x=-this._x,this._y=-this._y},toString:function(){return this._x+", "+this._y}},t.prototype={get id(){return this._id},get group(){return this._group},get life(){return this._life},get size(){return this._size},set size(e){this._size=e},get position(){return this._position},get velocity(){return this._velocity},update:function(e){this._life++;for(var t=0,i=this._behavior.length;t<i;t++)this._behavior[t].call(e,this)},toString:function(){return"Particle("+this._id+") "+this._life+" pos: "+this._position+" vec: "+this._velocity}},bpControl.bpFont={burst:function(t,i,n){var s=[this.behavior.cohesion(),this.behavior.move()],o=i-25,l=i+25;this.spray(t,function(){return[null,null,e.create(a.between(i-35,i+35),a.between(n+65,n-45)),e.random(.5),1+Math.random(),a.between(0,0),s]}),this.spray(.5*t,function(){return[null,null,e.create(a.between(o-35,l+35),n+20),e.random(.5),1+Math.random(),a.between(0,0),s]}),this.spray(.5*t,function(){return[null,null,e.create(a.between(o,l),n),e.random(.5),1+Math.random(),a.between(0,0),s]})},draw:function(e,t,i){e=null==e?14:e,this.burst(e,t,i)},init:function(e,t){this.close(),this.isStop=!1,this.fontColor=e,this.particles=[],this.destroyed=[],this.update=function(){},this.stage=function(){},this.canvas=document.createElement("canvas"),$(this.canvas).css({position:"absolute",left:0,top:0,"z-index":999}),t=t||document.body,$(this.canvas).appendTo($(t)),this.fitCanvas(),this.context=this.canvas.getContext("2d"),this.tick()},fitCanvas:function(){bpControl.bpFont.canvas.width=window.innerWidth,bpControl.bpFont.canvas.height=window.innerHeight},ff:function(e){var t=e.position,i=e.size,a=1-e.life/40;this.paint.circle(t.x,t.y,i,"rgba(255,255,255,"+a+")"),this.paint.circle(t.x,t.y,i+2,this.fontColor+.25*a+")")},act:function(){for(var e,t=bpControl.bpFont,i=0,a=t.particles.length;i<a;i++)t.particles[i].update(this);for(;e=t.destroyed.pop();)do{e===t.particles[i]&&t.particles.splice(i,1)}while(i-- >=0);for(i=0,a=t.particles.length;i<a;i++)t.ff(t.particles[i])},tick:function(){var e=bpControl.bpFont;if(e.clear(),!e.isStop&&e.particles){for(var t=e.particles.length,i=0;i<t;i++)e.particles[i]._life>=40&&e.destroy(e.particles[i]);e.act(),window.requestAnimationFrame(arguments.callee)}},close:function(){this.isStop=!0,this.particles=[],this.destroyed=[];var e=this;$(e.canvas).remove()},clear:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},destroy:function(e){this.destroyed.push(e)},add:function(e,i,a,n,s,o,l){this.particles.push(new t(e,i,a,n,s,o,l))},spray:function(e,t){for(var i=0;i<e;i++)this.add.apply(this,t())},paint:{circle:function(e,t,i,a){var n=bpControl.bpFont.context;n.beginPath(),n.arc(e,t,i,0,2*Math.PI,!1),n.fillStyle=a,n.fill()},square:function(e,t,i,a){var n=bpControl.bpFont.context;n.beginPath(),n.rect(e-.5*i,t-.5*i,i,i),n.fillStyle=a,n.fill()}},behavior:{cohesion:function(t,i){return t=Math.pow(t||100,2),i=i||.001,function(i){var a=bpControl.bpFont.particles,n=new e,s=0,o=a.length,l=0;if(!(o<=1)){for(;s<o;s++)a[s]===i||e.distanceSquared(a[s].position,i.position)>t||(n.add(e.subtract(a[s].position,i.position)),l++);l>0&&(n.divide(l),n.normalize(),n.multiply(i.velocity.magnitude),n.multiply(.05)),i.velocity.add(n)}}},move:function(){return function(e){e.position.add(e.velocity)}}}}}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:null,showTime:120,delay:300,first:!1,errorIndex:null,timeout:null,countTime:function(){var e=this.showTime;setTimeout(function t(){if(e<=-1)return a.close();$(".tpCountTime").html(e),e--,setTimeout(t,1e3)},1e3)},preloadImg:function(e,t){for(var i=0,a=0;a<e.length;a++){var n=new Image;n.onload=n.onerror=function(){++i==e.length&&t()},n.src=e[a].picture}},able:!1,_init:function(e,t){if(!($("#tpAll").length>0)){var i=this;ajax_getTpUser(function(n){if(!($("#tpAll").length>0)){if(void 0===n.config||null==n.config)return $(".onWallPk_icon").removeClass("animate"),i.error(0),void(t&&App.public.showInfo("获取数据失败"));if(null==n.item||0==n.item.length)return $(".onWallPk_icon").removeClass("animate"),t&&App.public.showInfo("没有PK选手"),i.error(1);if(1==n.config.isopen)return $(".onWallPk_icon").removeClass("animate"),t&&App.public.showInfo("请在后台开启PK功能"),i.error(2);$(".onWallPk_icon").removeClass("disabled"),a.delay=n.config.jg,a.showTime=n.config.xs,a.data=a.sort(n.item),a.preloadImg(n.item,function(){a.create(n.item,n.config.theme)}),e&&e()}},function(e){t&&t(e)})}},init:function(){if(!($("#tpAll").length>0)){var e=this;ajax_getTpUser(function(t){if(!($("#tpAll").length>0)){if(void 0===t.config||null==t.config)return $(".onWallPk_icon").removeClass("animate"),e.error(0);if(null==t.item||0==t.item.length)return $(".onWallPk_icon").removeClass("animate"),e.error(1);if(1==t.config.isopen)return $(".onWallPk_icon").removeClass("animate"),e.error(2);$(".onWallPk_icon").removeClass("disabled"),a.delay=t.config.jg,a.showTime=t.config.xs,setTimeout(function(){a._init()},1e3*a.delay)}},function(e){a.error()})}},sort:function(e){if(null==e||0==e.length)return[];var t=[];t.push.apply(t,e),t=t.sort(function(e,t){return parseFloat(t.votes)-parseFloat(e.votes)});for(var i=0;i<e.length;i++)for(var a=e[i],n=0;n<t.length;n++)if(a.tid==t[n].tid){a.index=n;break}return this.data=e,e},addPoint:function(e,t,i){if(!(null!=i&&null!=a.date&&i<=a.date)&&null!=e&&""!=e&&0!=$("#tpAll").length&&null!=a.data){for(var n=this.data,s=!1,o=0;o<n.length;o++)if(n[o].tid==e){s=!0;var l=parseInt(allData._newDs[t].price);n[o].votes+=parseInt(l),$('.oneTp[tid="'+e+'"]').find(".oneTp_point").html(n[o].votes);break}0!=$("#tpAll").length&&s&&this.reset()}},reset:function(){var e=this.data,t=[];t.push.apply(t,e),t=t.sort(function(e,t){return parseInt(t.votes)-parseInt(e.votes)});for(var i=0;i<t.length;i++){var a=t[i];if(0==i){$(".oneTp.bg_tp_no1").removeClass("bg_tp_no1"),$(".oneTp .pk_title1").removeClass("pk_title1");var n=$('.oneTp[tid="'+a.tid+'"]');n.addClass("bg_tp_no1"),n.find(".pk_title").addClass("pk_title1")}else if(1==i){$(".oneTp.bg_tp_no2").removeClass("bg_tp_no2"),$(".oneTp .pk_title2").removeClass("pk_title2");var n=$('.oneTp[tid="'+a.tid+'"]');n.addClass("bg_tp_no2"),n.find(".pk_title").addClass("pk_title2")}else if(2==i){$(".oneTp .pk_title3").removeClass("pk_title3");var n=$('.oneTp[tid="'+a.tid+'"]');n.find(".pk_title").addClass("pk_title3")}}},create:function(e,t){if(!($("#tpAll").length>0)){this.data=this.sort(this.data);var i="";$("#bpControl").hasClass("show")&&(i+=" hidden");var a='<div id="tpAll" class="'+i+'">';a+='<div id="tpAllVideoBox"></div>',a+='<div id="tpHead">',a+='<span><img src="'+allImage.logo+'" />'+t+"</span></div>",a+='<div class="tpTitleBox"><span>喜欢Ta就支持Ta，<tt class="tpCountTime">'+this.showTime+'</tt> 秒后返回上墙</span><img src="'+allImage.pk_pcTitleBg+'" /></div>',a+='<div id="tpBox"><div class="tpMain">',a+='<div id="tpMain">';for(var n=0;n<e.length;n++)a+=this.ceateOne(e[n]);a+="</div>",a+="</div></div>",a+="</div>",$(a).appendTo($("#all")),setTimeout(function(){$("#tpAll").addClass("animate")},100),this.able=!0,this.countTime(),$("#allBox").addClass("hidden"),e.length>2&&this.start()}},ceateOne:function(e){var t=0==e.index?"bg_tp_no1":1==e.index?"bg_tp_no2":"bg_tp",i='<div class="oneTp '+t+'"" tid="'+e.tid+'">';return i+='<i class="tpBg"></i>',0==e.index?i+='<span class="pk_title pk_title1"></span>':1==e.index?i+='<span class="pk_title pk_title2"></span>':2==e.index?i+='<span class="pk_title pk_title3"></span>':i+='<span class="pk_title"></span>',i+='<div class="_oneTp">',i+='<div class="oneTp_name ellipsis">'+e.title+"</div>",i+='<div class="oneTp_img"><img onload="App.public.setImage(this)" src="'+e.picture+'" /></div>',i+='<div class="oneTp_bottom ellipsis"><span>'+e.number+'号</span><span>支持点数 <tt class="oneTp_point">'+e.votes+"</tt></span></div>",i+="</div></div>"},start:function(){this.able=!0,a.timeout=setTimeout(function(){a.run()},4e3)},run:function(){if(this.able){$("#tpMain").css({transition:"transform 1s"});var e=$("#tpMain").find(".oneTp")[0],t=e.cloneNode(!0);$("#tpMain")[0].appendChild(t),$("#tpMain").css({transform:"translate3d(-380px,0,0)"}),setTimeout(function(){a.after()},1e3)}},after:function(){this.able&&($("#tpMain").find(".oneTp")[0]&&$($("#tpMain").find(".oneTp")[0]).remove(),$("#tpMain").css({transition:"none"}),$("#tpMain").css({transform:"translate3d(0,0,0)"}),this.able&&(a.timeout=setTimeout(function(){a.run()},4e3)))},close:function(){this.able=!1,$("#tpAll").remove(),$("#allBox").removeClass("hidden"),setTimeout(function(){a._init()},1e3*a.delay)},error:function(e){$(".onWallPk_icon").addClass("disabled"),this.errorIndex=e},showNow:function(e){if(!$(e).hasClass("animate")){if($(e).hasClass("disabled")){var t=null==this.errorIndex||0==this.errorIndex?"获取数据失败":1==this.errorIndex?"没有PK选手":"请在后台开启PK功能";return App.public.showInfo(t)}$(e).addClass("animate"),this._init(function(){$(e).removeClass("animate")},function(t){$(e).removeClass("animate"),App.public.showInfo(t||"操作失败")})}},_show:function(e,t){if(clearTimeout(a.timeout),!($("#tpAll").length>0)){var i=null;i=setTimeout(function(){t&&t()},1e4),ajax_getTpUser(function(n){try{clearTimeout(i)}catch(e){}if(!($("#tpAll").length>0)){if(void 0===n.config||null==n.config)return t("酒吧还没有设置好PK功能，在后台完成设置后可开启");if(null==n.item||0==n.item.length)return t("酒吧还没有设置好PK功能，在后台完成设置后可开启");if(1==n.config.isopen)return t("PK功能已经关闭");a.data=a.sort(n.item),a.date=n.date,a.preloadImg(n.item,function(){e(),a._create(n.item,n.config.theme)})}},function(e){t&&t(e)})}},date:null,_create:function(e,t){if(!($("#tpAll").length>0)){this.data=this.sort(this.data);var i='<div id="tpAll">';i+='<div class="tpTitleBox"><span>'+t+'</span><img src="'+allImage.pk_pcTitleBg+'" /></div>',i+='<div id="tpBox"><div class="tpMain">',i+='<div id="tpMain">';for(var a=0;a<e.length;a++)i+=this.ceateOne(e[a]);i+="</div>",i+="</div></div>",i+="</div>",$(i).appendTo($(".oneSwitch_pk .oneSwitchBox")),this.able=!0,e.length>2&&this.start()}}};window.tpControl=a,t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={preload:function(e){e.onComplete=e.onComplete||function(){};var t=e.src||[];if(!document.createElement("audio").canPlayType)return e.onComplete();if(0==t.length)return e.onComplete();var i=0;$('<audio id="audioPreload" style="display:none; width:0; height:0"></audio>').appendTo($("body")),function(){$("#audioPreload").unbind("canplaythrough").bind("canplaythrough",function(){if(++i>=t.length)return $("#audioPreload").remove(),e.onComplete();$("#audioPreload").attr({src:t[i]})}),$("#audioPreload").unbind("stalled error").bind("stalled",function(){if(++i>=t.length)return $("#audioPreload").remove(),e.onComplete();$("#audioPreload").attr({src:t[i]})}),$("#audioPreload").attr({src:t[i]})}()},play:function(e){if(null!=e&&e.length>0){$("#dsAudio").remove();var t='<audio id="dsAudio" style="display:none; width:0; height:0" autoplay="autoplay" src="'+e+'" loop></audio>';$(t).appendTo($("body"))}},close:function(){$("#dsAudio").remove()}};window.audioControl=a,t.default=a},function(e,t,i){"use strict";function a(e){if($.extend(l,e),l.privateChat?l.prefix="chat":l.prefix="merchant",!1 in window)return void App.showInfo("WebSocket 不支持",!1);var t=new SockJS(Global.WS_BASE+"/websocket");s=Stomp.over(t),s.connect({},function(e){console.log("Connected: "+e),s.subscribe("/wsSend/"+l.prefix+"_"+l.chatId,function(e){e.body&&l.callback&&l.callback(JSON.parse(e.body))}),s.send("/ws/"+l.prefix+"_"+l.chatId,{},"")},r)}function n(){null!==s&&s.disconnect(),clearTimeout(o),console.log("Disconnected")}Object.defineProperty(t,"__esModule",{value:!0});var s=null,o=null,l={},r=function(e){console.log("STOMP: "+e),o=setTimeout(a,5e3),console.log("STOMP: Reconecting in 5 seconds")};t.default={connect:a,disconnect:n}}]);